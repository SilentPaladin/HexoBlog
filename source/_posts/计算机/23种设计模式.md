---
title: 23ç§è®¾è®¡æ¨¡å¼
swiper: false
top: false
toc: true
tocOpen: true
onlyTitle: false
comments: true
share: true
copyright: true
donate: false
mathjax: true
imgTop: true
swiperImg:
swiperDesc:
bgImg:
bgImgTransition:
bgImgDelay:
img: https://cdn.pixabay.com/photo/2024/09/21/19/23/corn-9064747_1280.jpg
excerpt: åŸºäºdesign-patterns-for-humansé¡¹ç›®çš„ç¿»è¯‘ï¼Œå¹¶ä»¥è‡ªå·±çš„ç†è§£æŠŠPHPè½¬ä¸ºPythonä»£ç 
categories: è®¡ç®—æœº
tags: [ç¼–ç¨‹åŸºç¡€, Python]
date: 2025-03-23 2:18:00
---

# å‰è¨€

æ–‡ç« æ¥æºï¼š[design-patterns-for-humans](https://github.com/kamranahmedse/design-patterns-for-humans#-factory-pattern)

è®¾è®¡æ¨¡å¼æ˜¯è§£å†³é‡å¤é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼›**æ˜¯å¤„ç†ç‰¹å®šé—®é¢˜çš„æŒ‡å—**ã€‚å®ƒä»¬ä¸æ˜¯ä½ å¯ä»¥æ’å…¥åº”ç”¨ç¨‹åºå¹¶ç­‰å¾…å¥‡è¿¹å‘ç”Ÿçš„ç±»ã€åŒ…æˆ–åº“ã€‚ç›¸åï¼Œå®ƒä»¬æ˜¯å…³äºåœ¨æŸäº›æƒ…å†µä¸‹å¤„ç†ç‰¹å®šé—®é¢˜çš„æŒ‡å—ã€‚

ç»´åŸºç™¾ç§‘å¯¹å®ƒä»¬çš„æè¿°å¦‚ä¸‹ï¼š

>åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè½¯ä»¶è®¾è®¡æ¨¡å¼æ˜¯åœ¨è½¯ä»¶è®¾è®¡çš„ç‰¹å®šä¸Šä¸‹æ–‡ä¸­é’ˆå¯¹å¸¸è§é—®é¢˜çš„é€šç”¨å¯é‡ç”¨è§£å†³æ–¹æ¡ˆã€‚å®ƒä¸æ˜¯å¯ä»¥ç›´æ¥è½¬æ¢ä¸ºæºä»£ç æˆ–æœºå™¨ä»£ç çš„æˆå“è®¾è®¡ã€‚å®ƒæ˜¯å…³äºå¦‚ä½•è§£å†³é—®é¢˜çš„æè¿°æˆ–æ¨¡æ¿ï¼Œå¯åœ¨è®¸å¤šä¸åŒçš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚

âš ï¸ æ³¨æ„äº‹é¡¹
-----------------
- è®¾è®¡æ¨¡å¼ä¸æ˜¯ä½ æ‰€æœ‰é—®é¢˜çš„ä¸‡èƒ½è¯ã€‚
- ä¸è¦è¯•å›¾å¼ºè¡Œä½¿ç”¨å®ƒä»¬ï¼›å¦‚æœè¿™æ ·åšï¼Œåäº‹å°±ä¼šå‘ç”Ÿã€‚
- è¯·è®°ä½ï¼Œè®¾è®¡æ¨¡å¼æ˜¯è§£å†³é—®é¢˜çš„æ–¹æ¡ˆï¼Œè€Œä¸æ˜¯å¯»æ‰¾é—®é¢˜çš„æ–¹æ¡ˆï¼›æ‰€ä»¥ä¸è¦æƒ³å¤ªå¤šã€‚
- å¦‚æœä»¥æ­£ç¡®çš„æ–¹å¼åœ¨æ­£ç¡®çš„åœ°æ–¹ä½¿ç”¨å®ƒä»¬ï¼Œå®ƒä»¬å¯èƒ½ä¼šæˆä¸ºæ•‘æ˜Ÿï¼›å¦åˆ™å¯èƒ½ä¼šå¯¼è‡´ä¸€å›¢ç³Ÿçš„ä»£ç ã€‚

# åˆ›å»ºå‹è®¾è®¡æ¨¡å¼

ç”¨ç®€å•çš„è¯è¯´
> åˆ›å»ºå‹æ¨¡å¼ä¸“æ³¨äºå¦‚ä½•å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡æˆ–ä¸€ç»„ç›¸å…³å¯¹è±¡ã€‚

ç»´åŸºç™¾ç§‘è¡¨ç¤ºï¼š

> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œåˆ›å»ºå‹è®¾è®¡æ¨¡å¼æ˜¯å¤„ç†å¯¹è±¡åˆ›å»ºæœºåˆ¶çš„è®¾è®¡æ¨¡å¼ï¼Œè¯•å›¾ä»¥é€‚åˆå…·ä½“æƒ…å†µçš„æ–¹å¼åˆ›å»ºå¯¹è±¡ã€‚å¯¹è±¡åˆ›å»ºçš„åŸºæœ¬å½¢å¼å¯èƒ½ä¼šå¯¼è‡´è®¾è®¡é—®é¢˜æˆ–å¢åŠ è®¾è®¡çš„å¤æ‚æ€§ã€‚åˆ›å»ºå‹è®¾è®¡æ¨¡å¼é€šè¿‡æŸç§æ–¹å¼æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

## ğŸ  ç®€å•å·¥å‚

ç°å®ä¸–ç•Œçš„ä¾‹å­
> æƒ³è±¡ä¸€ä¸‹ï¼Œä½ åœ¨å»ºé€ ä¸€åº§æˆ¿å­ï¼Œéœ€è¦é—¨ã€‚ä½ å¯ä»¥ç©¿ä¸Šæœ¨å·¥æœï¼Œå¸¦ä¸Šæœ¨å¤´ã€èƒ¶æ°´ã€é’‰å­å’Œæ‰€æœ‰åˆ¶ä½œé—¨æ‰€éœ€çš„å·¥å…·ï¼Œç„¶åå¼€å§‹åœ¨ä½ çš„æˆ¿å­é‡Œåˆ¶ä½œé—¨ï¼Œæˆ–è€…ä½ å¯ä»¥ç®€å•åœ°æ‰“ç”µè¯ç»™å·¥å‚ï¼Œè®©ä»–ä»¬æŠŠåšå¥½çš„é—¨é€åˆ°ä½ å®¶ï¼Œè¿™æ ·ä½ å°±ä¸éœ€è¦äº†è§£åˆ¶ä½œé—¨çš„çŸ¥è¯†ï¼Œä¹Ÿä¸éœ€è¦å¤„ç†åˆ¶ä½œè¿‡ç¨‹ä¸­å¸¦æ¥çš„æ··ä¹±ã€‚

ç”¨ç®€å•çš„è¯è¯´
> ç®€å•å·¥å‚ç®€å•åœ°ä¸ºå®¢æˆ·ç”Ÿæˆä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸å‘å®¢æˆ·æš´éœ²ä»»ä½•å®ä¾‹åŒ–é€»è¾‘ã€‚

ç»´åŸºç™¾ç§‘ç§°
>åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰ä¸­ï¼Œå·¥å‚æ˜¯ç”¨äºåˆ›å»ºå…¶ä»–å¯¹è±¡çš„å¯¹è±¡ â€”â€” ä»å½¢å¼ä¸Šè®²ï¼Œå·¥å‚æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–æ–¹æ³•ï¼Œå®ƒä»æŸä¸ªæ–¹æ³•è°ƒç”¨ä¸­è¿”å›ä¸åŒåŸå‹æˆ–ç±»çš„å¯¹è±¡ï¼Œè¯¥æ–¹æ³•è°ƒç”¨è¢«å‡å®šä¸º â€œnewâ€ã€‚

```py
from abc import ABC, abstractmethod


class Door(ABC):
    @abstractmethod
    def get_width(self) -> float:
        pass

    @abstractmethod
    def get_height(self) -> float:
        pass


class WoodenDoor(Door):
    def __init__(self, width: float, height: float):
        self.width = width
        self.height = height

    def get_width(self) -> float:
        return self.width

    def get_height(self) -> float:
        return self.height
    
```
ç„¶åæˆ‘ä»¬æœ‰æˆ‘ä»¬çš„é—¨å‚ï¼Œå®ƒåˆ¶ä½œé—¨å¹¶å°†å…¶è¿”å›ã€‚
```py
class DoorFactory:
    @staticmethod
    def make_door(width: float, height: float) -> Door:
        return WoodenDoor(width, height)
```
ç„¶åå®ƒå¯ä»¥è¢«ç”¨ä½œ
```py
# Make me a door of 100x200
door = DoorFactory.make_door(100, 200)
print(f'Width: {door.get_width()}')
print(f'Height: {door.get_height()}')

# Make me a door of 50x100
door2 = DoorFactory.make_door(50, 100)
```
**ä½•æ—¶ä½¿ç”¨ï¼Ÿ**

å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡ä¸ä»…ä»…æ˜¯å‡ ä¸ªèµ‹å€¼æ“ä½œï¼Œè¿˜æ¶‰åŠä¸€äº›é€»è¾‘æ—¶ï¼Œå°†å…¶æ”¾åœ¨ä¸€ä¸ªä¸“é—¨çš„å·¥å‚ä¸­è€Œä¸æ˜¯åœ¨å„å¤„é‡å¤ç›¸åŒçš„ä»£ç ã€‚

## ğŸ­ å·¥å‚æ–¹æ³•

ç°å®ä¸–ç•Œç¤ºä¾‹
> è€ƒè™‘æ‹›è˜ç»ç†çš„æƒ…å†µã€‚ä¸€ä¸ªäººä¸å¯èƒ½ä¸ºæ¯ä¸ªèŒä½è¿›è¡Œé¢è¯•ã€‚å¥¹å¿…é¡»æ ¹æ®èŒä½ç©ºç¼ºå†³å®šå¹¶å°†é¢è¯•æ­¥éª¤å§”æ‰˜ç»™ä¸åŒçš„äººã€‚

ç”¨ç®€å•çš„è¯è¯´
> å®ƒæä¾›äº†ä¸€ç§å°†å®ä¾‹åŒ–é€»è¾‘å§”æ‰˜ç»™å­ç±»çš„æ–¹å¼ã€‚

ç»´åŸºç™¾ç§‘è¡¨ç¤º
>åœ¨åŸºäºç±»çš„ç¼–ç¨‹ä¸­ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒä½¿ç”¨å·¥å‚æ–¹æ³•æ¥å¤„ç†åˆ›å»ºå¯¹è±¡çš„é—®é¢˜ï¼Œè€Œæ— éœ€æŒ‡å®šè¦åˆ›å»ºçš„å¯¹è±¡çš„ç¡®åˆ‡ç±»ã€‚è¿™æ˜¯é€šè¿‡è°ƒç”¨å·¥å‚æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡å®ç°çš„ â€”â€” è¦ä¹ˆåœ¨æ¥å£ä¸­æŒ‡å®šå¹¶ç”±å­ç±»å®ç°ï¼Œè¦ä¹ˆåœ¨åŸºç±»ä¸­å®ç°å¹¶å¯ç”±æ´¾ç”Ÿç±»é€‰æ‹©æ€§åœ°é‡å†™ â€”â€” è€Œä¸æ˜¯é€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä»¥æˆ‘ä»¬ä¸Šé¢çš„æ‹›è˜ç»ç†ä¾‹å­ä¸ºä¾‹ã€‚
```py
from abc import ABC, abstractmethod


class Interviewer(ABC):
    @abstractmethod
    def ask_questions(self):
        pass


class Developer(Interviewer):
    def ask_questions(self):
        print('Asking about design patterns!')


class CommunityExecutive(Interviewer):
    def ask_questions(self):
        print('Asking about community building')

```
é¢è¯•å®˜
```py
class HiringManager(ABC):
    @abstractmethod
    def make_interviewer(self):
        pass

    def take_interview(self):
        interviewer = self.make_interviewer()
        interviewer.ask_questions()


class DevelopmentManager(HiringManager):
    def make_interviewer(self):
        return Developer()


class MarketingManager(HiringManager):
    def make_interviewer(self):
        return CommunityExecutive()
```
ç„¶åå®ƒå¯ä»¥è¢«ç”¨ä½œ
```py
dev_manager = DevelopmentManager ()
dev_manager.take_interview () # è¾“å‡º: Asking about design patterns
marketing_manager = MarketingManager ()
marketing_manager.take_interview () # è¾“å‡º: Asking about community building
```
**ä½•æ—¶ä½¿ç”¨ï¼Ÿ**

å½“ç±»ä¸­æœ‰ä¸€äº›é€šç”¨å¤„ç†ï¼Œä½†æ‰€éœ€çš„å­ç±»åœ¨è¿è¡Œæ—¶åŠ¨æ€å†³å®šæ—¶ï¼Œè¿™æ˜¯æœ‰ç”¨çš„ã€‚æ¢å¥è¯è¯´ï¼Œå½“å®¢æˆ·ç«¯ä¸çŸ¥é“å®ƒå¯èƒ½éœ€è¦å“ªä¸ªå…·ä½“çš„å­ç±»æ—¶ã€‚

## ğŸ”¨ æŠ½è±¡å·¥å‚

ç°å®ä¸–ç•Œçš„ä¾‹å­
> æ‰©å±•æˆ‘ä»¬ä¹‹å‰ç®€å•å·¥å‚çš„é—¨ä¾‹ã€‚æ ¹æ®ä½ çš„éœ€æ±‚ï¼Œä½ å¯èƒ½ä»æœ¨é—¨åº—ä¹°åˆ°æœ¨é—¨ï¼Œä»é“åº—ä¹°åˆ°é“é—¨ï¼Œæˆ–è€…ä»ç›¸å…³å•†åº—ä¹°åˆ°PVCé—¨ã€‚æ­¤å¤–ï¼Œä½ å¯èƒ½éœ€è¦ä¸åŒä¸“ä¸šçš„äººå®‰è£…é—¨ï¼Œæ¯”å¦‚æœ¨åŒ è£…æœ¨é—¨ï¼Œç„Šå·¥è£…é“é—¨ç­‰ã€‚æ­£å¦‚ä½ æ‰€è§ï¼Œç°åœ¨é—¨ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œæœ¨é—¨éœ€è¦æœ¨åŒ ï¼Œé“é—¨éœ€è¦ç„Šå·¥ç­‰ã€‚

ç”¨ç®€å•çš„è¯è¯´

> ä¸€ä¸ªå·¥å‚çš„å·¥å‚ï¼›ä¸€ä¸ªå°†ä¸ªä½“å’Œç›¸å…³/ä¾èµ–çš„å·¥å‚åˆ†ç»„åœ¨ä¸€èµ·çš„å·¥å‚ï¼Œè€Œä¸æŒ‡å®šå®ƒä»¬çš„å…·ä½“ç±»ã€‚

ç»´åŸºç™¾ç§‘ä¸Šè¯´
>æŠ½è±¡å·¥å‚æ¨¡å¼æä¾›äº†ä¸€ç§æ–¹æ³•æ¥å°è£…ä¸€ç»„å…·æœ‰å…±åŒä¸»é¢˜çš„å•ä¸ªå·¥å‚ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬çš„å…·ä½“ç±»ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

å°†ä¸Šè¿°é—¨ä¾‹å­è¿›è¡Œè½¬æ¢ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰æˆ‘ä»¬çš„`Door`æ¥å£åŠå…¶ä¸€äº›å®ç°

```py
class Door:
    def get_description(self):
        pass


class WoodenDoor(Door):
    def get_description(self):
        print('I am a wooden door')


class IronDoor(Door):
    def get_description(self):
        print('I am an iron door')
```
ç„¶åæˆ‘ä»¬ä¸ºæ¯ç§é—¨ç±»å‹é…å¤‡äº†ä¸€äº›é€‚é…ä¸“å®¶ã€‚
```py
class DoorFittingExpert:
    def get_description(self):
        pass


class Welder(DoorFittingExpert):
    def get_description(self):
        print('I can only fit iron doors')


class Carpenter(DoorFittingExpert):
    def get_description(self):
        print('I can only fit wooden doors')
```
ç°åœ¨æˆ‘ä»¬å·²ç»æ‹¥æœ‰äº†æŠ½è±¡å·¥å‚ï¼Œå®ƒå…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ç³»åˆ—ç›¸å…³å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œæœ¨è´¨é—¨å·¥å‚ä¼šåˆ›å»ºä¸€ä¸ªæœ¨è´¨é—¨å’Œä¸€ä¸ªæœ¨è´¨é—¨å®‰è£…ä¸“å®¶ï¼Œè€Œé“è´¨é—¨å·¥å‚åˆ™ä¼šåˆ›å»ºä¸€ä¸ªé“è´¨é—¨å’Œä¸€ä¸ªé“è´¨é—¨å®‰è£…ä¸“å®¶ã€‚
```py
class DoorFactory:
    def make_door(self):
        pass

    def make_fitting_expert(self):
        pass


class WoodenDoorFactory(DoorFactory):
    def make_door(self):
        return WoodenDoor()

    def make_fitting_expert(self):
        return Carpenter()


class IronDoorFactory(DoorFactory):
    def make_door(self):
        return IronDoor()

    def make_fitting_expert(self):
        return Welder()
```
ç„¶åå®ƒå¯ä»¥è¢«ç”¨ä½œ
```py
# åˆ›å»º WoodenDoorFactory å®ä¾‹
wooden_factory = WoodenDoorFactory()

door = wooden_factory.make_door()
expert = wooden_factory.make_fitting_expert()

door.get_description()  # è¾“å‡º: I am a wooden door
expert.get_description()  # è¾“å‡º: I can only fit wooden doors

# åŒæ ·é€‚ç”¨äº IronFactory
iron_factory = IronDoorFactory()

door = iron_factory.make_door()
expert = iron_factory.make_fitting_expert()

door.get_description()  # è¾“å‡º: I am an iron door
expert.get_description()  # è¾“å‡º: I can only fit iron doors
```
æ­£å¦‚ä½ æ‰€è§ï¼Œæœ¨é—¨å·¥å‚å°è£…äº†`æœ¨å·¥`å’Œ`æœ¨é—¨`ï¼ŒåŒæ ·ï¼Œé“é—¨å·¥å‚ä¹Ÿå°è£…äº†`é“é—¨`å’Œ`ç„Šå·¥`ã€‚å› æ­¤ï¼Œè¿™æœ‰åŠ©äºæˆ‘ä»¬ç¡®ä¿ä¸ºæ¯ä¸ªåˆ›å»ºçš„é—¨åˆ†é…æ­£ç¡®çš„è£…é…ä¸“å®¶ã€‚

**ä½•æ—¶ä½¿ç”¨ï¼Ÿ**

å½“å­˜åœ¨ç›¸äº’å…³è”çš„ä¾èµ–å…³ç³»ä¸”æ¶‰åŠä¸é‚£ä¹ˆç®€å•çš„åˆ›å»ºé€»è¾‘æ—¶

## ğŸ‘·æ„å»ºè€…

ç°å®ä¸–ç•Œçš„ä¾‹å­
> æƒ³è±¡ä½ åœ¨Hardee'sç‚¹äº†ä¸€ä»½ç‰¹å®šçš„å¥—é¤ï¼Œæ¯”å¦‚â€œå¤§Hardeeâ€ï¼Œä»–ä»¬æ¯«æ— é—®é¢˜åœ°é€’ç»™ä½ ï¼›è¿™æ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªä¾‹å­ã€‚ä½†æœ‰äº›æƒ…å†µä¸‹ï¼Œåˆ›å»ºé€»è¾‘å¯èƒ½æ¶‰åŠæ›´å¤šæ­¥éª¤ã€‚ä¾‹å¦‚ï¼Œä½ æƒ³è¦ä¸€ä¸ªå®šåˆ¶çš„Subwayå¥—é¤ï¼Œä½ æœ‰å¤šä¸ªé€‰æ‹©æ¥åˆ¶ä½œä½ çš„æ±‰å ¡ï¼Œä¾‹å¦‚ä½ æƒ³è¦å“ªç§é¢åŒ…ï¼Ÿä½ å–œæ¬¢ä»€ä¹ˆç±»å‹çš„é…±æ–™ï¼Ÿä½ æƒ³è¦ä»€ä¹ˆå¥¶é…ªï¼Ÿç­‰ç­‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ„å»ºè€…æ¨¡å¼å°±æ´¾ä¸Šç”¨åœºäº†ã€‚

ç”¨ç®€å•çš„è¯æ¥è¯´
> å…è®¸ä½ åˆ›å»ºå¯¹è±¡çš„ä¸åŒé£æ ¼ï¼ŒåŒæ—¶é¿å…æ„é€ å‡½æ•°æ±¡æŸ“ã€‚å½“å¯¹è±¡å¯èƒ½æœ‰å‡ ç§é£æ ¼æ—¶å¾ˆæœ‰ç”¨ã€‚æˆ–è€…åœ¨å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ä¸­æ¶‰åŠå¾ˆå¤šæ­¥éª¤æ—¶ä¹Ÿå¾ˆæœ‰ç”¨ã€‚

ç»´åŸºç™¾ç§‘è¯´
> æ„å»ºè€…æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡åˆ›å»ºçš„è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œæ—¨åœ¨æ‰¾åˆ°è§£å†³ä¼¸ç¼©æ„é€ å‡½æ•°åæ¨¡å¼çš„è§£å†³æ–¹æ¡ˆã€‚

è¯è™½å¦‚æ­¤ï¼Œè®©æˆ‘è¡¥å……ä¸€ä¸‹ä»€ä¹ˆæ˜¯ä¼¸ç¼©æ„é€ å‡½æ•°åæ¨¡å¼ã€‚åœ¨æŸä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬éƒ½è§è¿‡ä¸‹é¢è¿™æ ·çš„æ„é€ å‡½æ•°ï¼š
```py
public function __construct($size, $cheese = true, $pepperoni = true, $tomato = false, $lettuce = true)
{
}
```
æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæ„é€ å‡½æ•°çš„å‚æ•°æ•°é‡å¾ˆå¿«å°±ä¼šå˜å¾—éš¾ä»¥æ§åˆ¶ï¼Œç†è§£å‚æ•°çš„æ’åˆ—å¯èƒ½ä¼šå˜å¾—å›°éš¾ã€‚è€Œä¸”ï¼Œå¦‚æœä½ å°†æ¥æƒ³è¦æ·»åŠ æ›´å¤šé€‰é¡¹ï¼Œè¿™ä¸ªå‚æ•°åˆ—è¡¨å¯èƒ½ä¼šä¸æ–­å¢é•¿ã€‚è¿™è¢«ç§°ä¸ºæœ›è¿œé•œæ„é€ å‡½æ•°åæ¨¡å¼ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä¸€ä¸ªæ›´åˆç†çš„æ›¿ä»£æ–¹æ¡ˆæ˜¯ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰æˆ‘ä»¬æƒ³è¦åˆ¶ä½œçš„æ±‰å ¡

```py
class Burger:
    def __init__(self, builder):
        self.size = builder.size
        self.cheese = builder.cheese
        self.pepperoni = builder.pepperoni
        self.lettuce = builder.lettuce
        self.tomato = builder.tomato
```
ç„¶åæˆ‘ä»¬æœ‰ç”Ÿæˆå™¨
```py
class BurgerBuilder:
    def __init__(self, size):
        self.size = size
        self.cheese = False
        self.pepperoni = False
        self.lettuce = False
        self.tomato = False

    def add_pepperoni(self):
        self.pepperoni = True
        return self

    def add_lettuce(self):
        self.lettuce = True
        return self

    def add_cheese(self):
        self.cheese = True
        return self

    def add_tomato(self):
        self.tomato = True
        return self

    def build(self):
        return Burger(self)
```
ç„¶åå®ƒå¯ä»¥è¢«ä½¿ç”¨å¦‚ä¸‹ï¼š
```py
burger = BurgerBuilder(14).add_pepperoni().add_lettuce().add_tomato().build()
```
**ä½•æ—¶ä½¿ç”¨ï¼Ÿ**

å½“å¯¹è±¡å¯èƒ½æœ‰å¤šç§å˜ä½“ï¼Œå¹¶ä¸”ä¸ºäº†é¿å…æ„é€ å‡½æ•°çš„ä¼¸ç¼©é—®é¢˜æ—¶ã€‚ä¸å·¥å‚æ¨¡å¼çš„å…³é”®åŒºåˆ«åœ¨äºï¼šå·¥å‚æ¨¡å¼åœ¨åˆ›å»ºè¿‡ç¨‹æ˜¯ä¸€æ­¥åˆ°ä½çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œè€Œæ„å»ºå™¨æ¨¡å¼åœ¨åˆ›å»ºè¿‡ç¨‹æ˜¯å¤šæ­¥è¿›è¡Œçš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚

## ğŸ‘ åŸå‹æ¨¡å¼

ç°å®ä¸–ç•Œçš„ä¾‹å­
> è¿˜è®°å¾—å¤šè‰å—ï¼Ÿé‚£åªè¢«å…‹éš†çš„ç¾Šï¼æˆ‘ä»¬ä¸æ·±å…¥ç»†èŠ‚ï¼Œä½†è¿™é‡Œçš„å…³é”®æ˜¯å…³äºå…‹éš†

ç”¨ç®€å•çš„è¯æ¥è¯´
> é€šè¿‡å…‹éš†ç°æœ‰å¯¹è±¡æ¥åˆ›å»ºæ–°å¯¹è±¡ã€‚

ç»´åŸºç™¾ç§‘è¯´
> åŸå‹æ¨¡å¼æ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ã€‚å®ƒç”¨äºåœ¨è¦åˆ›å»ºçš„å¯¹è±¡ç±»å‹ç”±ä¸€ä¸ªåŸå‹å®ä¾‹å†³å®šæ—¶ï¼Œè¯¥åŸå‹è¢«å…‹éš†ä»¥äº§ç”Ÿæ–°å¯¹è±¡çš„æƒ…å†µã€‚

ç®€è€Œè¨€ä¹‹ï¼Œå®ƒå…è®¸ä½ åˆ›å»ºä¸€ä¸ªç°æœ‰å¯¹è±¡çš„å‰¯æœ¬ï¼Œå¹¶æ ¹æ®ä½ çš„éœ€æ±‚è¿›è¡Œä¿®æ”¹ï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶è¿›è¡Œè®¾ç½®çš„éº»çƒ¦ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

```py
import copy


class Sheep:
    def __init__(self, name, age=0, category='Mountain Sheep'):
        self.name = name
        self.age = age
        self.category = category

    def clone_sheep(self):
        return copy.deepcopy(self)

    def set_name(self, name):
        self.name = name

    def get_name(self):
        return self.name

    def set_category(self, category):
        self.category = category

    def get_category(self):
        return self.category
```
ç„¶åå¯ä»¥åƒä¸‹é¢è¿™æ ·è¿›è¡Œå…‹éš†ã€‚
```py
# ç¬¬ä¸€ä¸ªå…‹éš†ç¤ºä¾‹
original_sheep = Sheep("Dolly", 5)
cloned_sheep = original_sheep.clone_sheep()
cloned_sheep.name = "Cloned Dolly"

print(f"Original Sheep: {original_sheep.name}")
print(f"Cloned Sheep: {cloned_sheep.name}")

# ç¬¬äºŒä¸ªå…‹éš†ç¤ºä¾‹
original = Sheep('Jolly')
print(original.get_name())
print(original.get_category())

# å…‹éš†å¹¶ä¿®æ”¹æ‰€éœ€å†…å®¹
cloned = original.clone_sheep()
cloned.set_name('Dolly')
print(cloned.get_name())
print(cloned.get_category())
```
åŒæ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨é­”æœ¯æ–¹æ³• `__clone` æ¥ä¿®æ”¹å…‹éš†è¡Œä¸ºã€‚

**ä½•æ—¶ä½¿ç”¨ï¼Ÿ**

å½“éœ€è¦ä¸€ä¸ªä¸ç°æœ‰å¯¹è±¡ç›¸ä¼¼çš„å¯¹è±¡æ—¶ï¼Œæˆ–è€…åˆ›å»ºæ–°å¯¹è±¡çš„æˆæœ¬ç›¸å¯¹äºå…‹éš†è€Œè¨€è¿‡é«˜æ—¶ã€‚

## ğŸ’ å•ä¾‹æ¨¡å¼

ç°å®ä¸–ç•Œç¤ºä¾‹
> ä¸€ä¸ªå›½å®¶ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªæ€»ç»Ÿã€‚æ— è®ºä½•æ—¶éœ€è¦å±¥è¡ŒèŒè´£ï¼Œéƒ½å¿…é¡»è®©åŒä¸€ä¸ªæ€»ç»Ÿè¡ŒåŠ¨ã€‚è¿™é‡Œçš„æ€»ç»Ÿå°±æ˜¯ä¸€ä¸ªå•ä¾‹ã€‚

ç”¨é€šä¿—æ˜“æ‡‚çš„è¯è¯´
> ç¡®ä¿ä¸€ä¸ªç‰¹å®šç±»åªåˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚

ç»´åŸºç™¾ç§‘è¯´
> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œå•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå®ƒé™åˆ¶ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–ï¼Œä½¿å…¶åªæœ‰ä¸€ä¸ªå¯¹è±¡ã€‚è¿™åœ¨ç³»ç»Ÿä¸­éœ€è¦ç²¾ç¡®åœ°ä¸€ä¸ªå¯¹è±¡æ¥åè°ƒåŠ¨ä½œæ—¶éå¸¸æœ‰ç”¨ã€‚

å®é™…ä¸Šï¼Œå•ä¾‹æ¨¡å¼è¢«è®¤ä¸ºæ˜¯ä¸€ç§åæ¨¡å¼ï¼Œåº”è¯¥é¿å…è¿‡åº¦ä½¿ç”¨ã€‚å®ƒå¹¶éæœ¬è´¨ä¸Šå°±æ˜¯åçš„ï¼Œå¯èƒ½æœ‰ä¸€äº›æœ‰æ•ˆçš„ç”¨ä¾‹ï¼Œä½†ä½¿ç”¨æ—¶åº”å½“è°¨æ…ï¼Œå› ä¸ºå®ƒä¼šåœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­å¼•å…¥å…¨å±€çŠ¶æ€ï¼Œå¹¶ä¸”ä¸€ä¸ªåœ°æ–¹çš„æ”¹å˜å¯èƒ½ä¼šå½±å“å…¶ä»–åŒºåŸŸï¼Œè°ƒè¯•èµ·æ¥å¯èƒ½ä¼šå˜å¾—ç›¸å½“å›°éš¾ã€‚å…³äºå®ƒä»¬çš„å¦ä¸€ä¸ªåå¤„æ˜¯ï¼Œå®ƒä»¬ä¼šä½¿æ‚¨çš„ä»£ç ç´§å¯†è€¦åˆï¼Œè€Œä¸”æ¨¡æ‹Ÿå•ä¾‹å¯èƒ½ä¼šå¾ˆå›°éš¾ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

è¦åˆ›å»ºä¸€ä¸ªå•ä¾‹ï¼Œè¯·å°†æ„é€ å‡½æ•°è®¾ä¸ºç§æœ‰ï¼Œç¦ç”¨å…‹éš†ï¼Œç¦ç”¨æ‰©å±•ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªé™æ€å˜é‡æ¥å­˜æ”¾å®ä¾‹ã€‚
```py
class President:
    _instance = None

    def __new__(cls):
        if not cls._instance:
            cls._instance = super().__new__(cls)
        return cls._instance
```
ç„¶åä¸ºäº†ä½¿ç”¨
```py
president1 = President()
president2 = President()

print(president1 is president2)
```

# ç»“æ„å‹è®¾è®¡æ¨¡å¼

ç”¨ç®€å•çš„è¯è¯´
> ç»“æ„æ¨¡å¼ä¸»è¦å…³æ³¨å¯¹è±¡çš„ç»„æˆï¼Œæˆ–è€…æ¢å¥è¯è¯´ï¼Œå®ä½“å¦‚ä½•èƒ½å¤Ÿç›¸äº’ä½¿ç”¨ã€‚å¦ä¸€ç§è§£é‡Šæ˜¯ï¼Œå®ƒä»¬æœ‰åŠ©äºå›ç­”â€œå¦‚ä½•æ„å»ºè½¯ä»¶ç»„ä»¶ï¼Ÿâ€çš„é—®é¢˜ã€‚

ç»´åŸºç™¾ç§‘è¯´
> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œç»“æ„è®¾è®¡æ¨¡å¼æ˜¯é€šè¿‡è¯†åˆ«å®ç°å®ä½“ä¹‹é—´å…³ç³»çš„ç®€å•æ–¹æ³•æ¥ç®€åŒ–è®¾è®¡çš„æ¨¡å¼ã€‚

## ğŸ”Œ é€‚é…å™¨

ç°å®ä¸–ç•Œçš„ä¾‹å­
> å‡è®¾ä½ çš„è®°å¿†å¡é‡Œæœ‰ä¸€äº›å›¾ç‰‡ï¼Œéœ€è¦å°†å®ƒä»¬ä¼ è¾“åˆ°ä½ çš„ç”µè„‘ä¸Šã€‚ä¸ºäº†ä¼ è¾“è¿™äº›å›¾ç‰‡ï¼Œä½ éœ€è¦ä¸€ç§ä¸ç”µè„‘ç«¯å£å…¼å®¹çš„é€‚é…å™¨ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å°†è®°å¿†å¡è¿æ¥åˆ°ç”µè„‘ä¸Šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯»å¡å™¨å°±æ˜¯ä¸€ä¸ªé€‚é…å™¨ã€‚
> å¦ä¸€ä¸ªä¾‹å­æ˜¯è‘—åçš„ç”µæºé€‚é…å™¨ï¼›ä¸‰è„šæ’å¤´ä¸èƒ½ç›´æ¥æ’å…¥ä¸¤å­”æ’åº§ï¼Œå®ƒéœ€è¦ä½¿ç”¨ä¸€ä¸ªç”µæºé€‚é…å™¨ä½¿å…¶ä¸ä¸¤å­”æ’åº§å…¼å®¹ã€‚
> åˆæ¯”å¦‚ä¸€ä½ç¿»è¯‘å‘˜ï¼Œå°†ä¸€ä¸ªäººè¯´çš„è¯ç¿»è¯‘æˆå¦ä¸€ä¸ªäººèƒ½å¬æ‡‚çš„è¯­è¨€ã€‚

ç”¨ç®€å•çš„è¯è¯´
> é€‚é…å™¨æ¨¡å¼å…è®¸ä½ ç”¨ä¸€ä¸ªé€‚é…å™¨åŒ…è£…åŸæœ¬ä¸å…¼å®¹çš„å¯¹è±¡ï¼Œä½¿å®ƒä¸å¦ä¸€ä¸ªç±»å…¼å®¹ã€‚

ç»´åŸºç™¾ç§‘è¯´
> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œé€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸ç°æœ‰ç±»çš„æ¥å£è¢«ç”¨ä½œå¦ä¸€ä¸ªæ¥å£ã€‚å®ƒå¸¸ç”¨äºä½¿ç°æœ‰ç±»ä¸å…¶ä»–ç±»ä¸€èµ·å·¥ä½œï¼Œè€Œæ— éœ€ä¿®æ”¹å®ƒä»¬çš„æºä»£ç ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

è€ƒè™‘ä¸€ä¸ªæ¸¸æˆä¸­æœ‰ä¸€ä¸ªçŒäººï¼Œä»–æ•çŒç‹®å­ã€‚

é¦–å…ˆæˆ‘ä»¬æœ‰ä¸€ä¸ª`Lion`æ¥å£ï¼Œæ‰€æœ‰ç±»å‹çš„ç‹®å­éƒ½å¿…é¡»å®ç°è¿™ä¸ªæ¥å£

```py
from abc import ABC, abstractmethod


class Lion(ABC):
    @abstractmethod
    def roar(self):
        pass


class AfricanLion(Lion):
    def roar(self):
        pass


class AsianLion(Lion):
    def roar(self):
        pass
```
å¹¶ä¸”çŒäººæœŸæœ›ä»»ä½•å®ç°äº† `Lion` æ¥å£çš„å®ç°éƒ½èƒ½å¤Ÿæ•çŒã€‚
```py
class Hunter:
    def hunt(self, lion):
        lion.roar()
```
ç°åœ¨å‡è®¾æˆ‘ä»¬éœ€è¦åœ¨æ¸¸æˆä¸­æ·»åŠ ä¸€ä¸ª`WildDog`ï¼Œè¿™æ ·çŒäººä¹Ÿå¯ä»¥æ•æ‰å®ƒã€‚ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½ç›´æ¥è¿™æ ·åšï¼Œå› ä¸ºç‹—æœ‰ä¸€ä¸ªä¸åŒçš„æ¥å£ã€‚ä¸ºäº†ä½¿å®ƒä¸æˆ‘ä»¬çš„çŒäººå…¼å®¹ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸åˆ›å»ºä¸€ä¸ªé€‚é…å™¨ï¼Œä½¿å…¶å…¼å®¹ã€‚
```py
class WildDog:
    def bark(self):
        pass


class WildDogAdapter(Lion):
    def __init__(self, dog):
        self.dog = dog

    def roar(self):
        self.dog.bark()
```
ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `WildDogAdapter` åœ¨æˆ‘ä»¬çš„æ¸¸æˆä¸­ä½¿ç”¨ `WildDog`ã€‚
```py
wild_dog = WildDog()
wild_dog_adapter = WildDogAdapter(wild_dog)

hunter = Hunter()
hunter.hunt(wild_dog_adapter)
```

## ğŸš¡ æ¡¥æ¥æ¨¡å¼

ç°å®ä¸–ç•Œç¤ºä¾‹
> å‡è®¾ä½ æœ‰ä¸€ä¸ªåŒ…å«ä¸åŒé¡µé¢çš„ç½‘ç«™ï¼Œå¹¶ä¸”ä½ éœ€è¦å…è®¸ç”¨æˆ·æ›´æ”¹ä¸»é¢˜ã€‚ä½ ä¼šæ€ä¹ˆåšï¼Ÿä¸ºæ¯ä¸ªä¸»é¢˜åˆ›å»ºå¤šä¸ªé¡µé¢å‰¯æœ¬ï¼Œè¿˜æ˜¯åªåˆ›å»ºå•ç‹¬çš„ä¸»é¢˜å¹¶æ ¹æ®ç”¨æˆ·çš„åå¥½åŠ è½½å®ƒä»¬ï¼Ÿæ¡¥æ¥æ¨¡å¼å…è®¸ä½ é‡‡ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼Œå³ï¼š

![æœ‰æ¡¥æ¥æ¨¡å¼å’Œæ— æ¡¥æ¥æ¨¡å¼](https://cloud.githubusercontent.com/assets/11269635/23065293/33b7aea0-f515-11e6-983f-98823c9845ee.png)

ç”¨ç®€å•çš„è¯è¯´
> æ¡¥æ¥æ¨¡å¼æ˜¯å…³äºä¼˜å…ˆé€‰æ‹©ç»„åˆè€Œéç»§æ‰¿çš„ã€‚å®ç°ç»†èŠ‚ä»ä¸€ä¸ªå±‚æ¬¡ç»“æ„è½¬ç§»åˆ°å…·æœ‰å•ç‹¬å±‚æ¬¡ç»“æ„çš„å…¶ä»–å¯¹è±¡ä¸­ã€‚

ç»´åŸºç™¾ç§‘è¯´
> æ¡¥æ¥æ¨¡å¼æ˜¯è½¯ä»¶å·¥ç¨‹ä¸­ä½¿ç”¨çš„ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œæ—¨åœ¨â€œå°†æŠ½è±¡ä¸å…¶å®ç°è§£è€¦ï¼Œä»¥ä¾¿ä¸¤è€…å¯ä»¥ç‹¬ç«‹å˜åŒ–â€

**ç¼–ç¨‹ç¤ºä¾‹**

å°†ä¸Šé¢çš„WebPageç¤ºä¾‹è¿›è¡Œè½¬æ¢ã€‚è¿™é‡Œæˆ‘ä»¬æœ‰`WebPage`å±‚æ¬¡ç»“æ„

```py
class WebPage:
    def __init__(self, theme):
        self.theme = theme

    def get_content(self):
        pass


class About(WebPage):
    def get_content(self):
        return f"About page in {self.theme.get_color()}"


class Careers(WebPage):
    def get_content(self):
        return f"Careers page in {self.theme.get_color()}"
```
ä»¥åŠç‹¬ç«‹çš„ä¸»é¢˜å±‚æ¬¡ç»“æ„

```py
class Theme:
    def get_color(self):
        pass


class DarkTheme(Theme):
    def get_color(self):
        return 'Dark Black'


class LightTheme(Theme):
    def get_color(self):
        return 'Off white'


class AquaTheme(Theme):
    def get_color(self):
        return 'Light blue'
```
ä»¥åŠè¿™ä¸¤ä¸ªå±‚æ¬¡ç»“æ„
```py
dark_theme = DarkTheme()
about = About(dark_theme)
careers = Careers(dark_theme)

print(about.get_content())
print(careers.get_content())
```

## ğŸŒ¿ ç»„åˆæ¨¡å¼

ç°å®ä¸–ç•Œçš„ä¾‹å­
> æ¯ä¸ªç»„ç»‡éƒ½æ˜¯ç”±å‘˜å·¥ç»„æˆçš„ã€‚æ¯ä½å‘˜å·¥éƒ½æœ‰ç›¸åŒçš„ç‰¹å¾ï¼Œä¾‹å¦‚æœ‰è–ªæ°´ã€æœ‰ä¸€äº›èŒè´£ã€å¯èƒ½å‘æŸäººæ±‡æŠ¥å·¥ä½œã€å¯èƒ½æœ‰ä¸€äº›ä¸‹å±ç­‰ã€‚

ç”¨ç®€å•çš„è¯­è¨€æ¥è¯´
> ç»„åˆæ¨¡å¼å…è®¸å®¢æˆ·ç«¯ä»¥ç»Ÿä¸€çš„æ–¹å¼å¤„ç†å•ä¸ªå¯¹è±¡ã€‚

ç»´åŸºç™¾ç§‘è¿™æ ·è¯´
> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œç»„åˆæ¨¡å¼æ˜¯ä¸€ç§åˆ†å‰²è®¾è®¡æ¨¡å¼ã€‚ç»„åˆæ¨¡å¼æè¿°äº†ä¸€ç»„å¯¹è±¡åº”è¯¥ä»¥ä¸å•ä¸ªå¯¹è±¡å®ä¾‹ç›¸åŒçš„æ–¹å¼å¤„ç†ã€‚ç»„åˆçš„ç›®çš„æ˜¯å°†å¯¹è±¡â€œç»„åˆâ€æˆæ ‘çŠ¶ç»“æ„ï¼Œä»¥è¡¨ç¤ºéƒ¨åˆ†-æ•´ä½“çš„å±‚æ¬¡å…³ç³»ã€‚å®ç°ç»„åˆæ¨¡å¼å¯ä»¥è®©å®¢æˆ·ç«¯ä»¥ç»Ÿä¸€çš„æ–¹å¼å¤„ç†å•ä¸ªå¯¹è±¡å’Œç»„åˆã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä»¥ä¸Šé¢çš„å‘˜å·¥ä¸ºä¾‹ã€‚è¿™é‡Œæˆ‘ä»¬æœ‰ä¸åŒçš„å‘˜å·¥ç±»å‹

```py
from abc import ABC, abstractmethod


class Employee(ABC):
    def __init__(self, name: str, salary: float):
        self.name = name
        self.salary = salary

    @abstractmethod
    def get_name(self) -> str:
        pass

    @abstractmethod
    def set_salary(self, salary: float):
        pass

    @abstractmethod
    def get_salary(self) -> float:
        pass

    @abstractmethod
    def get_roles(self) -> list:
        pass


class Developer(Employee):
    def __init__(self, name: str, salary: float):
        super().__init__(name, salary)
        self.roles = []

    def get_name(self) -> str:
        return self.name

    def set_salary(self, salary: float):
        self.salary = salary

    def get_salary(self) -> float:
        return self.salary

    def get_roles(self) -> list:
        return self.roles


class Designer(Employee):
    def __init__(self, name: str, salary: float):
        super().__init__(name, salary)
        self.roles = []

    def get_name(self) -> str:
        return self.name

    def set_salary(self, salary: float):
        self.salary = salary

    def get_salary(self) -> float:
        return self.salary

    def get_roles(self) -> list:
        return self.roles
```
ç„¶åæˆ‘ä»¬æœ‰ä¸€ä¸ªç”±å‡ ç§ä¸åŒç±»å‹çš„å‘˜å·¥ç»„æˆçš„ç»„ç»‡ã€‚

```py
class Organization:
    def __init__(self):
        self.employees = []

    def add_employee(self, employee: Employee):
        self.employees.append(employee)

    def get_net_salaries(self) -> float:
        net_salary = 0
        for employee in self.employees:
            net_salary += employee.get_salary()
        return net_salary
```
ç„¶åå®ƒå¯ä»¥è¢«ç”¨ä½œ
```py
john = Developer('John Doe', 12000)
jane = Designer('Jane Doe', 15000)

# Add them to organization
organization = Organization()
organization.add_employee(john)
organization.add_employee(jane)

print(f"Net salaries: {organization.get_net_salaries()}")  # Net Salaries: 27000
```

## â˜• è£…é¥°å™¨

çœŸå®ä¸–ç•Œç¤ºä¾‹

> æƒ³è±¡ä½ ç»è¥ä¸€å®¶æ±½è½¦æœåŠ¡åº—ï¼Œæä¾›å¤šç§æœåŠ¡ã€‚ç°åœ¨ä½ è¦å¦‚ä½•è®¡ç®—æ”¶è´¹è´¦å•å‘¢ï¼Ÿä½ é€‰æ‹©ä¸€ä¸ªæœåŠ¡é¡¹ç›®ï¼Œç„¶ååŠ¨æ€åœ°æ·»åŠ æä¾›çš„æœåŠ¡ä»·æ ¼ï¼Œç›´åˆ°å¾—åˆ°æœ€ç»ˆè´¹ç”¨ã€‚åœ¨è¿™é‡Œï¼Œæ¯ç§æœåŠ¡ç±»å‹å°±æ˜¯ä¸€ä¸ªè£…é¥°å™¨ã€‚

ç”¨ç®€å•çš„è¯è¯´
> è£…é¥°å™¨æ¨¡å¼å…è®¸ä½ åœ¨è¿è¡Œæ—¶é€šè¿‡å°†å¯¹è±¡åŒ…è£…åœ¨è£…é¥°å™¨ç±»çš„å¯¹è±¡ä¸­æ¥åŠ¨æ€æ”¹å˜å¯¹è±¡çš„è¡Œä¸ºã€‚

ç»´åŸºç™¾ç§‘è¯´
> åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œè£…é¥°å™¨æ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸å‘å•ä¸ªå¯¹è±¡æ·»åŠ è¡Œä¸ºï¼Œæ— è®ºæ˜¯é™æ€è¿˜æ˜¯åŠ¨æ€æ·»åŠ ï¼Œè€Œä¸å½±å“åŒä¸€ç±»å…¶ä»–å¯¹è±¡çš„è¡Œä¸ºã€‚è£…é¥°å™¨æ¨¡å¼é€šå¸¸æœ‰åŠ©äºéµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œå› ä¸ºå®ƒå…è®¸åŠŸèƒ½åœ¨ä¸åŒçš„å…³æ³¨ç‚¹ä¹‹é—´åˆ’åˆ†ã€‚

**ç¨‹åºç¤ºä¾‹**

ä»¥å’–å•¡ä¸ºä¾‹ã€‚é¦–å…ˆæˆ‘ä»¬æœ‰ä¸€ä¸ªç®€å•çš„å®ç°å’–å•¡æ¥å£çš„å’–å•¡

```py
from abc import ABC, abstractmethod


class Coffee(ABC):
    @abstractmethod
    def get_cost(self):
        pass

    @abstractmethod
    def get_description(self):
        pass


class SimpleCoffee(Coffee):
    def get_cost(self):
        return 10

    def get_description(self):
        return 'Simple coffee'
```
æˆ‘ä»¬å¸Œæœ›ä½¿ä»£ç å…·æœ‰å¯æ‰©å±•æ€§ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶èƒ½å¤Ÿä¿®æ”¹å®ƒã€‚è®©æˆ‘ä»¬åˆ¶ä½œä¸€äº›é™„åŠ åŠŸèƒ½ï¼ˆè£…é¥°å™¨ï¼‰ã€‚
```py
class MilkCoffee(Coffee):
    def __init__(self, coffee):
        self.coffee = coffee

    def get_cost(self):
        return self.coffee.get_cost() + 2

    def get_description(self):
        return f"{self.coffee.get_description()}, milk"


class WhipCoffee(Coffee):
    def __init__(self, coffee):
        self.coffee = coffee

    def get_cost(self):
        return self.coffee.get_cost() + 5

    def get_description(self):
        return f"{self.coffee.get_description()}, whip"


class VanillaCoffee(Coffee):
    def __init__(self, coffee):
        self.coffee = coffee

    def get_cost(self):
        return self.coffee.get_cost() + 3

    def get_description(self):
        return f"{self.coffee.get_description()}, vanilla"
```
è®©æˆ‘ä»¬ç°åœ¨åˆ¶ä½œä¸€æ¯å’–å•¡

```py
some_coffee = SimpleCoffee()
print(some_coffee.get_cost())
print(some_coffee.get_description())

some_coffee = MilkCoffee(some_coffee)
print(some_coffee.get_cost())
print(some_coffee.get_description())

some_coffee = WhipCoffee(some_coffee)
print(some_coffee.get_cost())
print(some_coffee.get_description())

some_coffee = VanillaCoffee(some_coffee)
print(some_coffee.get_cost())
print(some_coffee.get_description())
```

## ğŸ“¦ å¤–è§‚æ¨¡å¼

ç°å®ä¸–ç•Œçš„ä¾‹å­
> ä½ å¦‚ä½•æ‰“å¼€ç”µè„‘ï¼Ÿâ€œæŒ‰ä¸‹ç”µæºæŒ‰é’®â€ï¼Œä½ ä¼šè¿™ä¹ˆè¯´ï¼è¿™æ˜¯å› ä¸ºä½ ä½¿ç”¨çš„æ˜¯ç”µè„‘å¤–éƒ¨æä¾›çš„ç®€å•æ¥å£ï¼Œè€Œå†…éƒ¨å®é™…ä¸Šéœ€è¦åšå¾ˆå¤šå·¥ä½œæ‰èƒ½å®ç°è¿™ä¸€ç‚¹ã€‚è¿™ç§å¯¹å¤æ‚å­ç³»ç»Ÿçš„ç®€å•æ¥å£å°±æ˜¯å¤–è§‚æ¨¡å¼ã€‚

ç”¨ç®€å•çš„è¯è¯´
> å¤–è§‚æ¨¡å¼ä¸ºå¤æ‚çš„å­ç³»ç»Ÿæä¾›äº†ä¸€ä¸ªç®€åŒ–çš„æ¥å£ã€‚

ç»´åŸºç™¾ç§‘ä¸Šè¯´
> å¤–è§‚æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä¸ºæ›´å¤§çš„ä»£ç ä½“ï¼ˆå¦‚ç±»åº“ï¼‰æä¾›äº†ä¸€ä¸ªç®€åŒ–çš„æ¥å£ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä»¥ä¸Šé¢çš„ç”µè„‘ä¾‹å­ä¸ºä¾‹ã€‚è¿™é‡Œæˆ‘ä»¬æœ‰ç”µè„‘ç±»

```py
class Computer:
    def get_electric_shock(self):
        print("Ouch!")

    def make_sound(self):
        print("Beep beep!")

    def show_loading_screen(self):
        print("Loading..")

    def bam(self):
        print("Ready to be used!")

    def close_everything(self):
        print("Bup bup bup buzzzz!")

    def sooth(self):
        print("Zzzzz")

    def pull_current(self):
        print("Haaah!")


class ComputerFacade:
    def __init__(self, computer):
        self.computer = computer

    def turn_on(self):
        self.computer.get_electric_shock()
        self.computer.make_sound()
        self.computer.show_loading_screen()
        self.computer.bam()

    def turn_off(self):
        self.computer.close_everything()
        self.computer.pull_current()
        self.computer.sooth()
```
ç°åœ¨æ¥ä½¿ç”¨è¿™ä¸ªå¤–è§‚

```py
computer = Computer()
facade = ComputerFacade(computer)
facade.turn_on()  # è¾“å‡º: Ouch! Beep beep! Loading.. Ready to be used!
facade.turn_off()  # è¾“å‡º: Bup bup bup buzzzz! Haaah! Zzzzz
```

## ğŸƒ äº«å…ƒæ¨¡å¼

ç°å®ä¸–ç•Œçš„ä¾‹å­
> ä½ æœ‰æ²¡æœ‰åœ¨è¡—è¾¹å°æ‘Šä¹°è¿‡æ–°é²œçš„èŒ¶ï¼Ÿä»–ä»¬é€šå¸¸ä¼šæ³¡æ¯”ä½ è¦æ±‚çš„æ›´å¤šçš„èŒ¶ï¼Œç„¶åæŠŠå‰©ä¸‹çš„ç•™ç»™å…¶ä»–é¡¾å®¢ï¼Œä»¥èŠ‚çœèµ„æºï¼Œæ¯”å¦‚ç…¤æ°”ç­‰ã€‚äº«å…ƒæ¨¡å¼å°±æ˜¯å…³äºå…±äº«çš„ã€‚

ç”¨ç®€å•çš„è¯æ¥è¯´
> å®ƒé€šè¿‡å°½å¯èƒ½å¤šåœ°ä¸ç›¸ä¼¼å¯¹è±¡å…±äº«ï¼Œæ¥æœ€å°åŒ–å†…å­˜ä½¿ç”¨æˆ–è®¡ç®—å¼€é”€ã€‚

ç»´åŸºç™¾ç§‘è¯´
> åœ¨è®¡ç®—æœºç¼–ç¨‹ä¸­ï¼Œäº«å…ƒæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ã€‚äº«å…ƒæ˜¯ä¸€ä¸ªé€šè¿‡ä¸å…¶ä»–ç±»ä¼¼å¯¹è±¡å°½å¯èƒ½å¤šåœ°å…±äº«æ•°æ®æ¥æœ€å°åŒ–å†…å­˜ä½¿ç”¨çš„å¯¹è±¡ï¼›å®ƒæ˜¯ä¸€ç§åœ¨ç®€å•çš„é‡å¤è¡¨ç¤ºä¼šå ç”¨ä¸å¯æ¥å—çš„å†…å­˜é‡æ—¶ä½¿ç”¨å¤§é‡å¯¹è±¡çš„æ–¹æ³•ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

å°†ä¸Šé¢çš„èŒ¶ä¾‹è½¬æ¢ä¸ºä»£ç ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰èŒ¶ç±»å‹å’Œåˆ¶èŒ¶è€…

```py
class KarakTea:
    pass


class TeaMaker:
    def __init__(self):
        self.available_tea = {}

    def make(self, preference):
        if preference not in self.available_tea:
            self.available_tea[preference] = KarakTea()
        return self.available_tea[preference]
```
ç„¶åæˆ‘ä»¬æœ‰ `TeaShop`ï¼Œå®ƒæ¥å—è®¢å•å¹¶æä¾›æœåŠ¡ã€‚
```py
class TeaShop:
    def __init__(self, tea_maker):
        self.orders = {}
        self.tea_maker = tea_maker

    def take_order(self, tea_type, table):
        self.orders[table] = self.tea_maker.make(tea_type)

    def serve(self):
        for table, tea in self.orders.items():
            print(f"Serving tea to table# {table}")
```
å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼ä½¿ç”¨

```py
tea_maker = TeaMaker()
shop = TeaShop(tea_maker)

shop.take_order('less sugar', 1)
shop.take_order('more milk', 2)
shop.take_order('without sugar', 5)

shop.serve()
```

## ğŸ± ä»£ç†

ç°å®ä¸–ç•Œç¤ºä¾‹
> ä½ æœ‰æ²¡æœ‰ç”¨è¿‡é—¨ç¦å¡é€šè¿‡ä¸€æ‰‡é—¨ï¼Ÿæ‰“å¼€é‚£æ‰‡é—¨æœ‰å¤šç§é€‰æ‹©ï¼Œå³å¯ä»¥ä½¿ç”¨é—¨ç¦å¡æˆ–æŒ‰ä¸‹ä¸€ä¸ªç»•è¿‡å®‰å…¨çš„æŒ‰é’®ã€‚è¿™æ‰‡é—¨çš„ä¸»è¦åŠŸèƒ½æ˜¯å¼€å¯ï¼Œä½†å®ƒä¸Šé¢æ·»åŠ äº†ä¸€ä¸ªä»£ç†ä»¥å¢åŠ ä¸€äº›åŠŸèƒ½ã€‚è®©æˆ‘ç”¨ä¸‹é¢çš„ä»£ç ç¤ºä¾‹æ›´å¥½åœ°è§£é‡Šå®ƒã€‚

ç”¨é€šä¿—æ˜“æ‡‚çš„è¯æ¥è¯´
> ä½¿ç”¨ä»£ç†æ¨¡å¼ï¼Œä¸€ä¸ªç±»ä»£è¡¨å¦ä¸€ä¸ªç±»çš„åŠŸèƒ½ã€‚

ç»´åŸºç™¾ç§‘è¯´
> æœ€å¹¿ä¹‰çš„ä»£ç†æ˜¯ä¸€ä¸ªä½œä¸ºå…¶ä»–äº‹ç‰©çš„æ¥å£çš„ç±»ã€‚ä»£ç†æ˜¯ä¸€ä¸ªåŒ…è£…å™¨æˆ–ä»£ç†å¯¹è±¡ï¼Œç”±å®¢æˆ·ç«¯è°ƒç”¨ä»¥è®¿é—®å¹•åçš„çœŸå®æœåŠ¡å¯¹è±¡ã€‚ä½¿ç”¨ä»£ç†å¯ä»¥ç®€å•åœ°è½¬å‘ç»™çœŸå®å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æä¾›é¢å¤–çš„é€»è¾‘ã€‚åœ¨ä»£ç†ä¸­å¯ä»¥æä¾›é¢å¤–åŠŸèƒ½ï¼Œä¾‹å¦‚å½“å¯¹çœŸå®å¯¹è±¡çš„æ“ä½œèµ„æºå¯†é›†æ—¶è¿›è¡Œç¼“å­˜ï¼Œæˆ–åœ¨è°ƒç”¨çœŸå®å¯¹è±¡æ“ä½œä¹‹å‰æ£€æŸ¥å‰ææ¡ä»¶ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä»¥ä¸Šå–è‡ªæˆ‘ä»¬çš„å®‰å…¨é—¨ç¤ºä¾‹ã€‚é¦–å…ˆæˆ‘ä»¬æœ‰é—¨æ¥å£å’Œé—¨çš„å®ç°

```py
from abc import ABC, abstractmethod


class Door(ABC):
    @abstractmethod
    def open(self):
        pass

    @abstractmethod
    def close(self):
        pass


class LabDoor(Door):
    def open(self):
        print("Opening lab door")

    def close(self):
        print("Closing the lab door"
```
ç„¶åæˆ‘ä»¬æœ‰ä¸€ä¸ªä»£ç†æ¥ä¿æŠ¤ä»»ä½•æˆ‘ä»¬æƒ³è¦ä¿æŠ¤çš„é—¨ã€‚
```py
class SecuredDoor(Door):
    def __init__(self, door):
        self.door = door

    def open(self, password):
        if self.authenticate(password):
            self.door.open()
        else:
            print("Big no! It ain't possible.")

    def authenticate(self, password):
        return password == '$ecr@t'

    def close(self):
        self.door.close()
```
ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨å®ƒ

```py
door = SecuredDoor(LabDoor())
door.open('invalid')  # Big no! It ain't possible.
door.open('$ecr@t')  # Opening lab door
door.close()  # Closing lab door
```

# è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼

ç”¨ç®€å•çš„è¯­è¨€æ¥è¯´
> å®ƒæ˜¯å…³äºå¯¹è±¡é—´è´£ä»»åˆ†é…çš„ã€‚ä¸ç»“æ„æ¨¡å¼ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä»¬ä¸ä»…æŒ‡å®šäº†ç»“æ„ï¼Œè¿˜æ¦‚è¿°äº†å¯¹è±¡é—´æ¶ˆæ¯ä¼ é€’/é€šä¿¡çš„æ¨¡å¼ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä»¬å¸®åŠ©å›ç­”"å¦‚ä½•åœ¨è½¯ä»¶ç»„ä»¶ä¸­è¿è¡Œè¡Œä¸º?"

ç»´åŸºç™¾ç§‘è¯´
> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè¡Œä¸ºè®¾è®¡æ¨¡å¼æ˜¯è¯†åˆ«å¯¹è±¡ä¹‹é—´å¸¸è§é€šä¿¡æ¨¡å¼å¹¶å®ç°è¿™äº›æ¨¡å¼çš„è®¾è®¡æ¨¡å¼ã€‚é€šè¿‡è¿™æ ·åšï¼Œè¿™äº›æ¨¡å¼å¢åŠ äº†æ‰§è¡Œæ­¤é€šä¿¡çš„çµæ´»æ€§ã€‚

## ğŸ”— èŒè´£é“¾

ç°å®ä¸–ç•Œçš„ä¾‹å­
> ä¾‹å¦‚ï¼Œä½ çš„è´¦æˆ·ä¸­è®¾ç½®äº†ä¸‰ç§æ”¯ä»˜æ–¹å¼ï¼ˆAã€Bå’ŒCï¼‰ï¼Œæ¯ç§éƒ½æœ‰ä¸åŒçš„é‡‘é¢ã€‚Aæœ‰100ç¾å…ƒï¼ŒBæœ‰300ç¾å…ƒï¼ŒCæœ‰1000ç¾å…ƒï¼Œæ”¯ä»˜åå¥½é€‰æ‹©é¡ºåºæ˜¯Aç„¶åBç„¶åCã€‚ä½ è¯•å›¾è´­ä¹°ä»·å€¼210ç¾å…ƒçš„ä¸œè¥¿ã€‚ä½¿ç”¨èŒè´£é“¾æ¨¡å¼ï¼Œé¦–å…ˆä¼šæ£€æŸ¥è´¦æˆ·Aæ˜¯å¦å¯ä»¥è¿›è¡Œè´­ä¹°ï¼Œå¦‚æœå¯ä»¥åˆ™å®Œæˆè´­ä¹°å¹¶ä¸­æ–­é“¾ã€‚å¦‚æœä¸å¯ä»¥ï¼Œè¯·æ±‚å°†è½¬å‘ç»™è´¦æˆ·Bæ£€æŸ¥é‡‘é¢ï¼Œå¦‚æœå¯ä»¥åˆ™ä¸­æ–­é“¾ï¼Œå¦åˆ™è¯·æ±‚å°†ç»§ç»­è½¬å‘ç›´åˆ°æ‰¾åˆ°åˆé€‚çš„å¤„ç†è€…ã€‚åœ¨è¿™é‡Œï¼ŒAã€Bå’ŒCæ˜¯é“¾çš„é“¾æ¥ï¼Œæ•´ä¸ªç°è±¡å°±æ˜¯èŒè´£é“¾ã€‚

ç”¨ç®€å•çš„è¯­è¨€æ¥è¯´
> å®ƒå¸®åŠ©æ„å»ºä¸€ä¸ªå¯¹è±¡é“¾ã€‚è¯·æ±‚ä»ä¸€ç«¯è¿›å…¥ï¼Œä»ä¸€ä¸ªå¯¹è±¡ä¼ é€’åˆ°å¦ä¸€ä¸ªå¯¹è±¡ï¼Œç›´åˆ°æ‰¾åˆ°åˆé€‚çš„å¤„ç†è€…ã€‚

ç»´åŸºç™¾ç§‘è¯´
> åœ¨é¢å‘å¯¹è±¡è®¾è®¡ä¸­ï¼ŒèŒè´£é“¾æ¨¡å¼æ˜¯ç”±å‘½ä»¤å¯¹è±¡æºå’Œä¸€ç³»åˆ—å¤„ç†å¯¹è±¡ç»„æˆçš„è®¾è®¡æ¨¡å¼ã€‚æ¯ä¸ªå¤„ç†å¯¹è±¡åŒ…å«å®šä¹‰å®ƒå¯ä»¥å¤„ç†çš„å‘½ä»¤å¯¹è±¡ç±»å‹çš„é€»è¾‘ï¼›å…¶ä½™çš„è¢«ä¼ é€’åˆ°é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå¤„ç†å¯¹è±¡ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

å°†ä¸Šè¿°è´¦æˆ·ç¤ºä¾‹è½¬æ¢ä¸ºä»£ç ã€‚é¦–å…ˆæˆ‘ä»¬æœ‰ä¸€ä¸ªåŸºç¡€è´¦æˆ·ï¼Œå®ƒåŒ…å«å°†è´¦æˆ·ä¸²è”åœ¨ä¸€èµ·çš„é€»è¾‘ä»¥åŠä¸€äº›è´¦æˆ·
```py
from abc import ABC, abstractmethod


class Account(ABC):
    def __init__(self):
        self.successor = None

    def set_next(self, account):
        self.successor = account

    def pay(self, amount_to_pay):
        if self.can_pay(amount_to_pay):
            print(f'Paid {amount_to_pay} using {self.__class__.__name__}')
        elif self.successor:
            print(f'Cannot pay using {self.__class__.__name__}. Proceeding ..')
            self.successor.pay(amount_to_pay)
        else:
            raise Exception('None of the accounts have enough balance')

    @abstractmethod
    def can_pay(self, amount):
        pass


class Bank(Account):
    def __init__(self, balance):
        super().__init__()
        self.balance = balance

    def can_pay(self, amount):
        return self.balance >= amount


class Paypal(Account):
    def __init__(self, balance):
        super().__init__()
        self.balance = balance

    def can_pay(self, amount):
        return self.balance >= amount


class Bitcoin(Account):
    def __init__(self, balance):
        super().__init__()
        self.balance = balance

    def can_pay(self, amount):
        return self.balance >= amount
```
ç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„é“¾æ¥ï¼ˆå³é“¶è¡Œã€Paypalã€æ¯”ç‰¹å¸ï¼‰æ¥å‡†å¤‡é“¾æ¡ã€‚
```py
# æ„å»ºè´¦æˆ·é“¾
bank = Bank(100)
paypal = Paypal(200)
bitcoin = Bitcoin(300)

bank.set_next(paypal)
paypal.set_next(bitcoin)

# å°è¯•ä½¿ç”¨é“¶è¡Œè´¦æˆ·æ”¯ä»˜
bank.pay(259)
```
## ğŸ‘® å‘½ä»¤æ¨¡å¼

ç°å®ä¸–ç•Œçš„ä¾‹å­
> ä¸€ä¸ªé€šç”¨çš„ä¾‹å­æ˜¯ä½ åœ¨é¤å…ç‚¹é¤ã€‚ä½ ï¼ˆå³ `Client`ï¼‰è®©æœåŠ¡å‘˜ï¼ˆå³ `Invoker`ï¼‰å¸¦æ¥ä¸€äº›é£Ÿç‰©ï¼ˆå³ `Command`ï¼‰ï¼ŒæœåŠ¡å‘˜åªæ˜¯å°†è¯·æ±‚è½¬å‘ç»™å¨å¸ˆï¼ˆå³ `Receiver`ï¼‰ï¼Œè€Œå¨å¸ˆçŸ¥é“è¦åšä»€ä¹ˆä»¥åŠå¦‚ä½•çƒ¹é¥ªã€‚
> å¦ä¸€ä¸ªä¾‹å­æ˜¯ä½ ï¼ˆå³ `Client`ï¼‰ä½¿ç”¨é¥æ§å™¨ï¼ˆ`Invoker`ï¼‰æ‰“å¼€ï¼ˆå³ `Command`ï¼‰ç”µè§†ï¼ˆå³ `Receiver`ï¼‰ã€‚

ç”¨é€šä¿—çš„è¯æ¥è¯´
> å…è®¸ä½ æŠŠåŠ¨ä½œå°è£…åœ¨å¯¹è±¡ä¸­ã€‚è¿™ä¸ªæ¨¡å¼èƒŒåçš„å…³é”®æ€æƒ³æ˜¯æä¾›ä¸€ç§è§£è€¦å®¢æˆ·ç«¯å’Œæ¥æ”¶è€…çš„æ–¹æ³•ã€‚

ç»´åŸºç™¾ç§‘è¯´
> åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œå‘½ä»¤æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå…¶ä¸­ä¸€ä¸ªå¯¹è±¡è¢«ç”¨æ¥å°è£…æ‰§è¡ŒåŠ¨ä½œæˆ–åœ¨å°†æ¥æŸä¸ªæ—¶é—´è§¦å‘äº‹ä»¶æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯åŒ…æ‹¬æ–¹æ³•åã€æ‹¥æœ‰è¯¥æ–¹æ³•çš„å¯¹è±¡ä»¥åŠæ–¹æ³•å‚æ•°çš„å€¼ã€‚

**ç¨‹åºç¤ºä¾‹**

é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ¥æ”¶è€…ï¼Œå®ƒå®ç°äº†å¯ä»¥æ‰§è¡Œçš„æ¯ä¸€ä¸ªåŠ¨ä½œçš„å®ç°
```py
# Receiver
class Bulb:
    def turn_on(self):
        print("Bulb has been lit")

    def turn_off(self):
        print("Darkness!")

```
ç„¶åæˆ‘ä»¬æœ‰ä¸€ä¸ªæ¥å£ï¼Œæ¯ä¸ªå‘½ä»¤éƒ½å°†å®ç°è¿™ä¸ªæ¥å£ï¼Œç„¶åæˆ‘ä»¬æœ‰ä¸€ç»„å‘½ä»¤ã€‚
```py
# Command interface
class Command:
    def execute(self):
        pass

    def undo(self):
        pass

    def redo(self):
        pass


# Command
class TurnOn(Command):
    def __init__(self, bulb):
        self.bulb = bulb

    def execute(self):
        self.bulb.turn_on()

    def undo(self):
        self.bulb.turn_off()

    def redo(self):
        self.execute()


class TurnOff(Command):
    def __init__(self, bulb):
        self.bulb = bulb

    def execute(self):
        self.bulb.turn_off()

    def undo(self):
        self.bulb.turn_on()

    def redo(self):
        self.execute()
```
ç„¶åæˆ‘ä»¬æœ‰ä¸€ä¸ª `Invoker`ï¼Œå®¢æˆ·ç«¯å°†é€šè¿‡å®ƒæ¥å¤„ç†ä»»ä½•å‘½ä»¤ã€‚
```py
# Invoker
class RemoteControl:
    def submit(self, command):
        command.execute()
```
æœ€åï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨æˆ‘ä»¬çš„å®¢æˆ·ç«¯ä¸­ä½¿ç”¨å®ƒã€‚
```py
bulb = Bulb()

turn_on = TurnOn(bulb)
turn_off = TurnOff(bulb)

remote = RemoteControl()
remote.submit(turn_on)
remote.submit(turn_off)
```
å‘½ä»¤æ¨¡å¼ä¹Ÿå¯ä»¥ç”¨æ¥å®æ–½åŸºäºäº‹åŠ¡çš„ç³»ç»Ÿã€‚åœ¨è¿™ç§ç³»ç»Ÿä¸­ï¼Œä½ ä¸€æ‰§è¡Œå‘½ä»¤å°±ä¼šç»´æŠ¤å‘½ä»¤çš„å†å²è®°å½•ã€‚å¦‚æœæœ€ç»ˆçš„å‘½ä»¤æˆåŠŸæ‰§è¡Œï¼Œä¸€åˆ‡é¡ºåˆ©ï¼›å¦åˆ™ï¼Œåªéœ€éå†å†å²è®°å½•ï¼Œå¯¹æ‰€æœ‰å·²æ‰§è¡Œçš„å‘½ä»¤ç»§ç»­æ‰§è¡Œ`undo`æ“ä½œã€‚

## â¿ è¿­ä»£å™¨

ç°å®ä¸–ç•Œçš„ä¾‹å­
> ä¸€ä¸ªè€å¼æ”¶éŸ³æœºå°†æ˜¯è¿­ä»£å™¨çš„ä¸€ä¸ªå¾ˆå¥½ä¾‹å­ï¼Œç”¨æˆ·å¯ä»¥ä»æŸä¸ªé¢‘é“å¼€å§‹ï¼Œç„¶åä½¿ç”¨â€œä¸‹ä¸€ä¸ªâ€æˆ–â€œä¸Šä¸€ä¸ªâ€æŒ‰é’®æµè§ˆç›¸åº”çš„é¢‘é“ã€‚æˆ–è€…ä»¥MP3æ’­æ”¾å™¨æˆ–ç”µè§†æœºä¸ºä¾‹ï¼Œä½ å¯ä»¥æŒ‰â€œä¸‹ä¸€ä¸ªâ€å’Œâ€œä¸Šä¸€ä¸ªâ€æŒ‰é’®æ¥æµè§ˆè¿ç»­çš„é¢‘é“ï¼Œæ¢å¥è¯è¯´ï¼Œå®ƒä»¬éƒ½æä¾›äº†ä¸€ä¸ªæ¥å£æ¥è¿­ä»£æµè§ˆç›¸åº”çš„é¢‘é“ã€æ­Œæ›²æˆ–å¹¿æ’­ç”µå°ã€‚

ç”¨ç®€å•çš„è¯­è¨€æ¥è¯´
> å®ƒæä¾›äº†ä¸€ç§è®¿é—®å¯¹è±¡å…ƒç´ çš„æ–¹å¼ï¼Œè€Œä¸æš´éœ²åº•å±‚çš„è¡¨ç¤ºã€‚

ç»´åŸºç™¾ç§‘è¯´
> åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œè¿­ä»£å™¨æ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå…¶ä¸­ä½¿ç”¨è¿­ä»£å™¨æ¥éå†å®¹å™¨å¹¶è®¿é—®å®¹å™¨çš„å…ƒç´ ã€‚è¿­ä»£å™¨æ¨¡å¼å°†ç®—æ³•ä¸å®¹å™¨è§£è€¦ï¼›åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç®—æ³•å¿…ç„¶æ˜¯ç‰¹å®šäºå®¹å™¨çš„ï¼Œå› æ­¤æ— æ³•è§£è€¦ã€‚

**ç¨‹åºç¤ºä¾‹**

```py
class RadioStation:
    def __init__(self, frequency):
        self.frequency = frequency

    def get_frequency(self):
        return self.frequency
```
ç„¶åæˆ‘ä»¬æœ‰æˆ‘ä»¬çš„è¿­ä»£å™¨

```py
class StationList:
    def __init__(self):
        self.stations = []
        self.counter = 0

    def add_station(self, station):
        self.stations.append(station)

    def remove_station(self, to_remove):
        to_remove_frequency = to_remove.get_frequency()
        self.stations = [station for station in self.stations if station.get_frequency() != to_remove_frequency]

    def __len__(self):
        return len(self.stations)

    def __iter__(self):
        self.counter = 0
        return self

    def __next__(self):
        if self.counter < len(self.stations):
            result = self.stations[self.counter]
            self.counter += 1
            return result
        raise StopIteration
```
ç„¶åå®ƒå¯ä»¥è¢«ç”¨ä½œ
```py
station_list = StationList()

station_list.add_station(RadioStation(89))
station_list.add_station(RadioStation(101))
station_list.add_station(RadioStation(102))
station_list.add_station(RadioStation(103.2))

for station in station_list:
    print(station.get_frequency())

station_list.remove_station(RadioStation(89))  # Will remove station 89
```

## ğŸ‘½ ä¸­ä»‹è€…æ¨¡å¼

ç°å®ä¸–ç•Œçš„ä¾‹å­
> ä¸€ä¸ªé€šç”¨çš„ä¾‹å­æ˜¯ï¼Œå½“ä½ é€šè¿‡æ‰‹æœºä¸æŸäººäº¤è°ˆæ—¶ï¼Œæœ‰ä¸€ä¸ªç½‘ç»œæä¾›å•†ååœ¨ä½ å’Œå¯¹æ–¹ä¹‹é—´ï¼Œä½ ä»¬çš„å¯¹è¯é€šè¿‡å®ƒä¼ é€’è€Œä¸æ˜¯ç›´æ¥å‘é€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç½‘ç»œæä¾›å•†å°±æ˜¯ä¸­ä»‹è€…ã€‚

ç”¨ç®€å•çš„è¯­è¨€æ¥è¯´
> ä¸­ä»‹è€…æ¨¡å¼æ·»åŠ äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹å¯¹è±¡ï¼ˆç§°ä¸ºä¸­ä»‹è€…ï¼‰æ¥æ§åˆ¶ä¸¤ä¸ªå¯¹è±¡ï¼ˆç§°ä¸ºåŒäº‹ï¼‰ä¹‹é—´çš„äº¤äº’ã€‚å®ƒæœ‰åŠ©äºå‡å°‘ç›¸äº’é€šä¿¡çš„ç±»ä¹‹é—´çš„è€¦åˆã€‚å› ä¸ºç°åœ¨å®ƒä»¬ä¸éœ€è¦äº†è§£å¯¹æ–¹çš„å®ç°ç»†èŠ‚ã€‚

ç»´åŸºç™¾ç§‘è¯´
> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œä¸­ä»‹è€…æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªå°è£…ä¸€ç»„å¯¹è±¡å¦‚ä½•äº¤äº’çš„å¯¹è±¡ã€‚è¿™ç§æ¨¡å¼è¢«è®¤ä¸ºæ˜¯ä¸€ç§è¡Œä¸ºæ¨¡å¼ï¼Œå› ä¸ºå®ƒå¯ä»¥æ”¹å˜ç¨‹åºçš„è¿è¡Œè¡Œä¸ºã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„èŠå¤©å®¤ï¼ˆå³ä¸­ä»‹è€…ï¼‰ç¤ºä¾‹ï¼Œç”¨æˆ·ï¼ˆå³åŒäº‹ï¼‰ç›¸äº’å‘é€æ¶ˆæ¯ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ä¸­ä»‹è€…ï¼Œå³èŠå¤©å®¤

```py
from datetime import datetime


class ChatRoomMediator:
    def show_message(self, user, message):
        pass


class ChatRoom(ChatRoomMediator):
    def show_message(self, user, message):
        time_str = datetime.now().strftime('%b %d, %y %H:%M')
        sender = user.get_name()
        print(f'{time_str} [{sender}]: {message}')
```
ç„¶åæ˜¯æˆ‘ä»¬çš„ç”¨æˆ·ï¼Œå³åŒäº‹ã€‚
```py
class User:
    def __init__(self, name, chat_mediator):
        self.name = name
        self.chat_mediator = chat_mediator

    def get_name(self):
        return self.name

    def send(self, message):
        self.chat_mediator.show_message(self, message)
```
ç°åœ¨ä½¿ç”¨å®ƒ
```py
mediator = ChatRoom()

john = User('John Doe', mediator)
jane = User('Jane Doe', mediator)

john.send('Hi there!')
jane.send('Hey!')
```

## ğŸ’¾ å¤‡å¿˜å½•æ¨¡å¼

ç°å®ä¸–ç•Œç¤ºä¾‹
> ä»¥è®¡ç®—å™¨ä¸ºä¾‹ï¼ˆå³å‘èµ·è€…ï¼‰ï¼Œæ¯å½“ä½ è¿›è¡Œä¸€äº›è®¡ç®—æ—¶ï¼Œæœ€åä¸€æ¬¡è®¡ç®—ç»“æœä¼šè¢«ä¿å­˜åœ¨å†…å­˜ä¸­ï¼ˆå³å¤‡å¿˜å½•ï¼‰ï¼Œè¿™æ ·ä½ å°±å¯ä»¥é€šè¿‡æŸäº›æ“ä½œæŒ‰é’®ï¼ˆå³ç®¡ç†è€…ï¼‰è¿”å›åˆ°å®ƒå¹¶å¯èƒ½æ¢å¤å®ƒã€‚

ç”¨ç®€å•çš„è¯è¯´
> å¤‡å¿˜å½•æ¨¡å¼æ˜¯å…³äºæ•è·å’Œå­˜å‚¨å¯¹è±¡çš„å½“å‰çŠ¶æ€ï¼Œä»¥ä¾¿ä»¥åå¯ä»¥å¹³æ»‘åœ°æ¢å¤å®ƒã€‚

ç»´åŸºç™¾ç§‘è¯´
> å¤‡å¿˜å½•æ¨¡å¼æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå®ƒæä¾›äº†å°†å¯¹è±¡æ¢å¤åˆ°å…¶å…ˆå‰çŠ¶æ€çš„èƒ½åŠ›ï¼ˆé€šè¿‡å›æ»šæ’¤é”€ï¼‰ã€‚

å½“ä½ éœ€è¦æä¾›æŸç§æ’¤é”€åŠŸèƒ½æ—¶ï¼Œé€šå¸¸å¾ˆæœ‰ç”¨ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

è®©æˆ‘ä»¬ä»¥ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ä¸ºä¾‹ï¼Œè¯¥ç¼–è¾‘å™¨ä¸æ—¶ä¿å­˜çŠ¶æ€ï¼Œå¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥æ¢å¤è¿™äº›çŠ¶æ€ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¤‡å¿˜å½•å¯¹è±¡ï¼Œå®ƒèƒ½å¤ŸæŒæœ‰ç¼–è¾‘å™¨çš„çŠ¶æ€

```py
# Memento class to hold the state of the editor
class EditorMemento:
    def __init__(self, content):
        self.content = content

    def get_content(self):
        return self.content
```
ç„¶åæˆ‘ä»¬æœ‰æˆ‘ä»¬çš„ç¼–è¾‘å™¨ï¼Œå³å‘èµ·è€…ï¼Œå®ƒå°†ä½¿ç”¨å¤‡å¿˜å½•å¯¹è±¡ã€‚
```py
class Editor:
    def __init__(self):
        self.content = ''

    def type(self, words):
        self.content = f"{self.content} {words}"

    def get_content(self):
        return self.content

    def save(self):
        return EditorMemento(self.content)

    def restore(self, memento):
        self.content = memento.get_content()
```
ç„¶åå®ƒå°±å¯ä»¥ç”¨ä½œ
```py
editor = Editor()

# Type some stuff
editor.type('This is the first sentence.')
editor.type('This is second.')

# Save the state to restore to : This is the first sentence. This is second.
saved = editor.save()

# Type some more
editor.type('And this is third.')

# Output: Content before Saving
print(editor.get_content())  # This is the first sentence. This is second. And this is third.

# Restoring to last saved state
editor.restore(saved)

print(editor.get_content())  # This is the first sentence. This is second.
```

## ğŸ˜ è§‚å¯Ÿè€…

ç°å®ä¸–ç•Œçš„ä¾‹å­
> ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯æ±‚èŒè€…ï¼Œä»–ä»¬è®¢é˜…äº†ä¸€äº›æ‹›è˜ç½‘ç«™ï¼Œæ¯å½“æœ‰åŒ¹é…çš„å·¥ä½œæœºä¼šæ—¶ï¼Œä»–ä»¬å°±ä¼šæ”¶åˆ°é€šçŸ¥ã€‚

ç”¨ç®€å•çš„è¯è¯´
> å®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä»¥ä¾¿å½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜å…¶çŠ¶æ€æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½ä¼šæ”¶åˆ°é€šçŸ¥ã€‚

ç»´åŸºç™¾ç§‘è¯´
> è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå…¶ä¸­ä¸€ä¸ªå¯¹è±¡ï¼Œç§°ä¸ºä¸»é¢˜ï¼Œç»´æŠ¤ä¸€ä¸ªä¾èµ–å®ƒçš„å¯¹è±¡çš„åˆ—è¡¨ï¼Œç§°ä¸ºè§‚å¯Ÿè€…ï¼Œå¹¶é€šè¿‡è°ƒç”¨å®ƒä»¬çš„æ–¹æ³•ä¹‹ä¸€è‡ªåŠ¨é€šçŸ¥å®ƒä»¬ä»»ä½•çŠ¶æ€å˜åŒ–ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

å°†æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­è¿›è¡Œè½¬æ¢ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰éœ€è¦è¢«é€šçŸ¥çš„æ±‚èŒè€…å…³äºèŒä½å‘å¸ƒçš„æƒ…å†µã€‚

```py
class JobPost:
    def __init__(self, title):
        self.title = title

    def get_title(self):
        return self.title


class JobSeeker:
    def __init__(self, name):
        self.name = name

    def on_job_posted(self, job):
        print(f'Hi {self.name}! New job posted: {job.get_title()}')
```
ç„¶åæˆ‘ä»¬æœ‰äº†å·¥ä½œæ‹›è˜ä¿¡æ¯ï¼Œæ±‚èŒè€…ä¼šè®¢é˜…è¿™äº›ä¿¡æ¯ã€‚

```py
class EmploymentAgency:
    def __init__(self):
        self.observers = []

    def notify(self, job_posting):
        for observer in self.observers:
            observer.on_job_posted(job_posting)

    def attach(self, observer):
        self.observers.append(observer)

    def add_job(self, job_posting):
        self.notify(job_posting)
```
ç„¶åå®ƒå¯ä»¥è¢«ç”¨ä½œ

```py
# åˆ›å»ºè®¢é˜…è€…
john_doe = JobSeeker('John Doe')
jane_doe = JobSeeker('Jane Doe')

# åˆ›å»ºå‘å¸ƒè€…å¹¶æ·»åŠ è®¢é˜…è€…
job_postings = EmploymentAgency()
job_postings.attach(john_doe)
job_postings.attach(jane_doe)

# æ·»åŠ æ–°èŒä½å¹¶æŸ¥çœ‹è®¢é˜…è€…æ˜¯å¦æ”¶åˆ°é€šçŸ¥
job_postings.add_job(JobPost('Software Engineer'))
```

## ğŸƒ è®¿é—®è€…

ç°å®ä¸–ç•Œçš„ä¾‹å­
> æƒ³è±¡æœ‰äººå»è¿ªæ‹œæ—…æ¸¸ã€‚ä»–ä»¬åªéœ€è¦ä¸€ç§æ–¹å¼ï¼ˆå³ç­¾è¯ï¼‰è¿›å…¥è¿ªæ‹œã€‚åˆ°è¾¾åï¼Œä»–ä»¬å¯ä»¥è‡ªè¡Œå‰å¾€è¿ªæ‹œçš„ä»»ä½•åœ°æ–¹å‚è§‚ï¼Œæ— éœ€è¯·æ±‚è®¸å¯æˆ–ä¸ºäº†è®¿é—®æŸä¸ªåœ°æ–¹è€Œåšé¢å¤–çš„å·¥ä½œï¼›åªéœ€å‘Šè¯‰ä»–ä»¬ä¸€ä¸ªåœ°æ–¹ï¼Œä»–ä»¬å°±å¯ä»¥å»å‚è§‚ã€‚è®¿é—®è€…æ¨¡å¼è®©ä½ èƒ½å¤Ÿåšåˆ°è¿™ä¸€ç‚¹ï¼Œå®ƒå¸®åŠ©ä½ å¢åŠ å¯å‚è§‚çš„åœ°æ–¹ï¼Œä½¿ä»–ä»¬èƒ½å¤Ÿåœ¨ä¸è¿›è¡Œé¢å¤–å·¥ä½œçš„æƒ…å†µä¸‹å°½å¯èƒ½å¤šåœ°æ¸¸è§ˆã€‚

ç”¨ç®€å•çš„è¯æ¥è¯´
> è®¿é—®è€…æ¨¡å¼å…è®¸ä½ å‘å¯¹è±¡æ·»åŠ æ›´å¤šæ“ä½œï¼Œè€Œæ— éœ€ä¿®æ”¹å®ƒä»¬ã€‚

ç»´åŸºç™¾ç§‘è¯´
> åœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹å’Œè½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè®¿é—®è€…è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§å°†ç®—æ³•ä¸å®ƒæ‰€æ“ä½œçš„å¯¹è±¡ç»“æ„åˆ†ç¦»çš„æ–¹æ³•ã€‚è¿™ç§åˆ†ç¦»çš„ä¸€ä¸ªå®é™…ç»“æœæ˜¯èƒ½å¤Ÿåœ¨ä¸ä¿®æ”¹ç°æœ‰å¯¹è±¡ç»“æ„çš„æƒ…å†µä¸‹å‘å…¶ä¸­æ·»åŠ æ–°çš„æ“ä½œã€‚è¿™æ˜¯éµå¾ªå¼€æ”¾/å°é—­åŸåˆ™çš„ä¸€ç§æ–¹å¼ã€‚

**ç¨‹åºç¤ºä¾‹**

è®©æˆ‘ä»¬ä»¥ä¸€ä¸ªåŠ¨ç‰©å›­æ¨¡æ‹Ÿä¸ºä¾‹ï¼Œæˆ‘ä»¬æœ‰å¤šç§ä¸åŒçš„åŠ¨ç‰©ï¼Œæˆ‘ä»¬éœ€è¦è®©å®ƒä»¬å‘å‡ºå£°éŸ³ã€‚è®©æˆ‘ä»¬ä½¿ç”¨è®¿é—®è€…æ¨¡å¼æ¥ç¿»è¯‘è¿™ä¸ªä¾‹å­

```py
# Visitee
class Animal:
    def accept(self, operation):
        pass


# Visitor
class AnimalOperation:
    def visit_monkey(self, monkey):
        pass

    def visit_lion(self, lion):
        pass

    def visit_dolphin(self, dolphin):
        pass
```
ç„¶åæˆ‘ä»¬æœ‰åŠ¨ç‰©çš„å®ç°
```py
class Monkey(Animal):
    def shout(self):
        print('Ooh oo aa aa!')

    def accept(self, operation):
        operation.visit_monkey(self)


class Lion(Animal):
    def roar(self):
        print('Roaaar!')

    def accept(self, operation):
        operation.visit_lion(self)


class Dolphin(Animal):
    def speak(self):
        print('Tuut tuttu tuutt!')

    def accept(self, operation):
        operation.visit_dolphin(self)
```
è®©æˆ‘ä»¬å®ç°æˆ‘ä»¬çš„è®¿é—®è€…

```py
class Speak(AnimalOperation):
    def visit_monkey(self, monkey):
        monkey.shout()

    def visit_lion(self, lion):
        lion.roar()

    def visit_dolphin(self, dolphin):
        dolphin.speak()
```
ç„¶åï¼Œå®ƒå¯ä»¥è¢«ç”¨ä½œ
```py
monkey = Monkey()
lion = Lion()
dolphin = Dolphin()

speak = Speak()

monkey.accept(speak)    # Ooh oo aa aa!
lion.accept(speak)      # Roaaar!
dolphin.accept(speak)   # Tuut tutt tuutt!
```
æˆ‘ä»¬æœ¬å¯ä»¥é€šè¿‡ä¸ºåŠ¨ç‰©å»ºç«‹ä¸€ä¸ªç»§æ‰¿å±‚æ¬¡ç»“æ„æ¥ç®€å•åœ°åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†é‚£æ ·çš„è¯æ¯å½“æˆ‘ä»¬éœ€è¦ç»™åŠ¨ç‰©æ·»åŠ æ–°çš„åŠ¨ä½œæ—¶ï¼Œå°±å¿…é¡»ä¿®æ”¹åŠ¨ç‰©ç±»ã€‚ä½†ç°åœ¨æˆ‘ä»¬ä¸éœ€è¦è¿™æ ·åšäº†ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æœ‰äººè¦æ±‚æˆ‘ä»¬ç»™åŠ¨ç‰©æ·»åŠ è·³è·ƒè¡Œä¸ºï¼Œæˆ‘ä»¬åªéœ€é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çš„è®¿é—®è€…å³å¯è½»æ¾å®ç°è¿™ä¸€ç‚¹ã€‚
```py
class Jump(AnimalOperation):
    def visit_monkey(self, monkey):
        print('Jumped 20 feet high! on to the tree!')

    def visit_lion(self, lion):
        print('Jumped 7 feet! Back on the ground!')

    def visit_dolphin(self, dolphin):
        print('Walked on water a little and disappeared')
```
ä»¥åŠç”¨æ³•
```py
jump = Jump()

monkey.accept(speak)
monkey.accept(jump)

lion.accept(speak)
lion.accept(jump)

dolphin.accept(speak)
dolphin.accept(jump)
```

## ğŸ’¡ ç­–ç•¥

ç°å®ä¸–ç•Œçš„ä¾‹å­
> è€ƒè™‘æ’åºçš„ä¾‹å­ï¼Œæˆ‘ä»¬å®ç°äº†å†’æ³¡æ’åºï¼Œä½†éšç€æ•°æ®é‡çš„å¢é•¿ï¼Œå†’æ³¡æ’åºå˜å¾—éå¸¸æ…¢ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å®ç°äº†å¿«é€Ÿæ’åºã€‚ä½†ç°åœ¨ï¼Œå°½ç®¡å¿«é€Ÿæ’åºç®—æ³•åœ¨å¤„ç†å¤§æ•°æ®æ—¶è¡¨ç°æ›´å¥½ï¼Œä½†å¯¹äºå°æ•°æ®é›†æ¥è¯´å´éå¸¸æ…¢ã€‚ä¸ºäº†åº”å¯¹è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬å®æ–½äº†ä¸€ç§ç­–ç•¥ï¼Œå³å¯¹äºå°æ•°æ®é›†ä½¿ç”¨å†’æ³¡æ’åºï¼Œè€Œå¯¹äºå¤§æ•°æ®é›†åˆ™ä½¿ç”¨å¿«é€Ÿæ’åºã€‚

ç”¨ç®€å•çš„è¯è¯´
> ç­–ç•¥æ¨¡å¼å…è®¸ä½ æ ¹æ®æƒ…å†µåˆ‡æ¢ç®—æ³•æˆ–ç­–ç•¥ã€‚

ç»´åŸºç™¾ç§‘è¯´
> åœ¨è®¡ç®—æœºç¼–ç¨‹ä¸­ï¼Œç­–ç•¥æ¨¡å¼ï¼ˆä¹Ÿç§°ä¸ºæ”¿ç­–æ¨¡å¼ï¼‰æ˜¯ä¸€ç§è¡Œä¸ºå‹è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸åœ¨è¿è¡Œæ—¶é€‰æ‹©ç®—æ³•çš„è¡Œä¸ºã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

å°†ä¸Šé¢çš„ä¾‹å­ç¿»è¯‘æˆä»£ç ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰æˆ‘ä»¬çš„ç­–ç•¥æ¥å£å’Œä¸åŒçš„ç­–ç•¥å®ç°

```py
from abc import ABC, abstractmethod


class SortStrategy(ABC):
    @abstractmethod
    def sort(self, dataset):
        pass


class BubbleSortStrategy(SortStrategy):
    def sort(self, dataset):
        print("Sorting using bubble sort")
        return dataset


class QuickSortStrategy(SortStrategy):
    def sort(self, dataset):
        print("Sorting using quick sort")
        return dataset
```
ç„¶åæˆ‘ä»¬æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œå®ƒå°†ä½¿ç”¨ä»»ä½•ç­–ç•¥

```py
class Sorter:
    def __init__(self, sorter_small, sorter_big):
        self.sorter_small = sorter_small
        self.sorter_big = sorter_big

    def sort(self, dataset):
        if len(dataset) > 5:
            return self.sorter_big.sort(dataset)
        else:
            return self.sorter_small.sort(dataset)
```
å¹¶ä¸”è¿™ä¸ªå¯ä»¥è¢«ç”¨ä½œ

```py
small_dataset = [1, 3, 4, 2]
big_dataset = [1, 4, 3, 2, 8, 10, 5, 6, 9, 7]

sorter = Sorter(BubbleSortStrategy(), QuickSortStrategy())

sorter.sort(small_dataset)
sorter.sort(big_dataset)
```

## ğŸ’¢ çŠ¶æ€

ç°å®ä¸–ç•Œçš„ä¾‹å­
> æƒ³è±¡ä½ æ­£åœ¨ä½¿ç”¨æŸä¸ªç»˜å›¾åº”ç”¨ç¨‹åºï¼Œä½ é€‰æ‹©äº†ç”»ç¬”è¿›è¡Œç»˜åˆ¶ã€‚ç°åœ¨ï¼Œç”»ç¬”ä¼šæ ¹æ®æ‰€é€‰é¢œè‰²æ”¹å˜å…¶è¡Œä¸ºï¼Œå³å¦‚æœä½ é€‰æ‹©äº†çº¢è‰²ï¼Œå®ƒä¼šä»¥çº¢è‰²ç»˜åˆ¶ï¼›å¦‚æœæ˜¯è“è‰²ï¼Œåˆ™ä»¥è“è‰²ç»˜åˆ¶ç­‰ã€‚

ç”¨ç®€å•çš„è¯è¯´
> å®ƒå…è®¸ä½ åœ¨çŠ¶æ€å˜åŒ–æ—¶æ”¹å˜ç±»çš„è¡Œä¸ºã€‚

ç»´åŸºç™¾ç§‘è¯´
> çŠ¶æ€æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå®ƒä»¥ä¸€ç§é¢å‘å¯¹è±¡çš„æ–¹å¼å®ç°äº†çŠ¶æ€æœºã€‚é€šè¿‡çŠ¶æ€æ¨¡å¼ï¼Œæ¯ä¸ªå•ç‹¬çš„çŠ¶æ€è¢«å®ç°ä¸ºçŠ¶æ€æ¨¡å¼æ¥å£çš„æ´¾ç”Ÿç±»ï¼Œå¹¶ä¸”é€šè¿‡è°ƒç”¨ç”±è¯¥æ¨¡å¼çš„è¶…ç±»å®šä¹‰çš„æ–¹æ³•æ¥å®ç°çŠ¶æ€è½¬æ¢ã€‚
> çŠ¶æ€æ¨¡å¼å¯ä»¥è§£é‡Šä¸ºä¸€ç§ç­–ç•¥æ¨¡å¼ï¼Œå®ƒèƒ½å¤Ÿé€šè¿‡åœ¨æ¨¡å¼æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•è°ƒç”¨æ¥åˆ‡æ¢å½“å‰çš„ç­–ç•¥ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

è®©æˆ‘ä»¬ä»¥æ‰‹æœºä¸ºä¾‹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰æˆ‘ä»¬çš„çŠ¶æ€æ¥å£å’Œä¸€äº›çŠ¶æ€å®ç°

```py
class PhoneState:
    def pick_up(self):
        pass

    def hang_up(self):
        pass

    def dial(self):
        pass


class PhoneStateIdle(PhoneState):
    def pick_up(self):
        return PhoneStatePickedUp()

    def hang_up(self):
        raise Exception("already idle")

    def dial(self):
        raise Exception("unable to dial in idle state")


class PhoneStatePickedUp(PhoneState):
    def pick_up(self):
        raise Exception("already picked up")

    def hang_up(self):
        return PhoneStateIdle()

    def dial(self):
        return PhoneStateCalling()


class PhoneStateCalling(PhoneState):
    def pick_up(self):
        raise Exception("already picked up")

    def hang_up(self):
        return PhoneStateIdle()

    def dial(self):
        raise Exception("already dialing")
```
ç„¶åæˆ‘ä»¬æœ‰ä¸€ä¸ªPhoneç±»ï¼Œå®ƒåœ¨ä¸åŒçš„è¡Œä¸ºè°ƒç”¨ä¸­æ”¹å˜çŠ¶æ€ã€‚
```py
class Phone:
    def __init__(self):
        self.state = PhoneStateIdle()

    def pick_up(self):
        self.state = self.state.pick_up()

    def hang_up(self):
        self.state = self.state.hang_up()

    def dial(self):
        self.state = self.state.dial()
```
ç„¶åï¼Œå®ƒå¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨ï¼Œå¹¶ä¼šè°ƒç”¨ç›¸å…³çš„çŠ¶æ€æ–¹æ³•ï¼š
```py
phone = Phone()
phone.pick_up()
phone.dial()
```

## ğŸ“’ æ¨¡æ¿æ–¹æ³•

ç°å®ä¸–ç•Œç¤ºä¾‹
> å‡è®¾æˆ‘ä»¬è¦å»ºé€ ä¸€åº§æˆ¿å­ã€‚å»ºé€ çš„æ­¥éª¤å¯èƒ½å¦‚ä¸‹ï¼š
> - å‡†å¤‡æˆ¿å±‹åŸºç¡€
> - å»ºé€ å¢™å£
> - æ·»åŠ å±‹é¡¶
> - æ·»åŠ å…¶ä»–æ¥¼å±‚

> è¿™äº›æ­¥éª¤çš„é¡ºåºä¸èƒ½æ”¹å˜ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ä¸èƒ½åœ¨å»ºå¢™ä¹‹å‰å…ˆå»ºå±‹é¡¶ç­‰ï¼Œä½†æ¯ä¸ªæ­¥éª¤éƒ½å¯ä»¥ä¿®æ”¹ï¼Œä¾‹å¦‚å¢™å£å¯ä»¥ç”¨æœ¨å¤´ã€èšé…¯æˆ–çŸ³å¤´åˆ¶ä½œã€‚

ç”¨ç®€å•çš„è¯æ¥è¯´
> æ¨¡æ¿æ–¹æ³•å®šä¹‰äº†æ‰§è¡ŒæŸä¸ªç®—æ³•çš„éª¨æ¶ï¼Œä½†å°†é‚£äº›æ­¥éª¤çš„å®ç°æ¨è¿Ÿåˆ°å­ç±»ä¸­ã€‚

ç»´åŸºç™¾ç§‘è¯´
> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå®ƒåœ¨æ“ä½œä¸­å®šä¹‰äº†ä¸€ä¸ªç®—æ³•çš„ç¨‹åºéª¨æ¶ï¼Œå¹¶å°†ä¸€äº›æ­¥éª¤æ¨è¿Ÿç»™å­ç±»ã€‚å®ƒå…è®¸é‡æ–°å®šä¹‰ç®—æ³•çš„æŸäº›æ­¥éª¤è€Œä¸æ”¹å˜ç®—æ³•çš„ç»“æ„ã€‚

**ç¼–ç¨‹ç¤ºä¾‹**

æƒ³è±¡æˆ‘ä»¬æœ‰ä¸€ä¸ªæ„å»ºå·¥å…·ï¼Œå¸®åŠ©æˆ‘ä»¬è¿›è¡Œæµ‹è¯•ã€ä»£ç æ£€æŸ¥ã€æ„å»ºã€ç”Ÿæˆæ„å»ºæŠ¥å‘Šï¼ˆå³ä»£ç è¦†ç›–ç‡æŠ¥å‘Šã€ä»£ç æ£€æŸ¥æŠ¥å‘Šç­‰ï¼‰ä»¥åŠåœ¨æµ‹è¯•æœåŠ¡å™¨ä¸Šéƒ¨ç½²æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåŸºç¡€ç±»ï¼Œå®ƒæŒ‡å®šäº†æ„å»ºç®—æ³•çš„éª¨æ¶ï¼š

```py
from abc import ABC, abstractmethod


class Builder(ABC):
    def build(self):
        self.test()
        self.lint()
        self.assemble()
        self.deploy()

    @abstractmethod
    def test(self):
        pass

    @abstractmethod
    def lint(self):
        pass

    @abstractmethod
    def assemble(self):
        pass

    @abstractmethod
    def deploy(self):
        pass
```
ç„¶åæˆ‘ä»¬å¯ä»¥æœ‰è‡ªå·±çš„å®ç°
```py
class AndroidBuilder(Builder):
    def test(self):
        print('Running android tests')

    def lint(self):
        print('Linting the android code')

    def assemble(self):
        print('Assembling the android build')

    def deploy(self):
        print('Deploying android build to server')


class IosBuilder(Builder):
    def test(self):
        print('Running ios tests')

    def lint(self):
        print('Linting the ios code')

    def assemble(self):
        print('Assembling the ios build')

    def deploy(self):
        print('Deploying ios build to server')
```
ç„¶åå®ƒå¯ä»¥è¢«ç”¨ä½œ
```py
android_builder = AndroidBuilder()
android_builder.build()

# Output:
# Running android tests
# Linting the android code
# Assembling the android build
# Deploying android build to server

ios_builder = IosBuilder()
ios_builder.build()

# Output:
# Running ios tests
# Linting the ios code
# Assembling the ios build
# Deploying ios build to server
```
